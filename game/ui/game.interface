<?xml version="1.0" encoding="UTF-8"?>
<interface name="game" scenex="0" sceney="0" scenewidth="100%" sceneheight="88h">
	<!-- Packages -->
	<include file="game_chat.package"/>
	<include file="game_shop_old.package"/>
	<include file="game_vote.package"/>
	<include file="ui_items.package"/>
	<include file="tooltip_ability.package"/>
	<include file="tooltip_ability_hero.package"/>
	<include file="tooltip_ability_levelup.package"/>
	<include file="tooltip_ability_info.package"/>
	<include file="tooltip_item.package"/>
	<include file="tooltip_attack.package"/>
	<include file="tooltip_defense.package"/>
	<include file="tooltip_movement.package"/>
	<include file="tooltip_unit.package"/>
	<include file="tooltip_attribute.package"/>
	<include file="tooltip_attribute2.package"/>
	<include file="tooltip_health.package"/>
	<include file="tooltip_mana.package"/>
	<include file="tooltip_experience.package"/>
	<include file="tooltip_attack_info.package"/>
	<include file="tooltip_defense_info.package"/>
	<include file="tooltip_attribute_info.package"/>
	<include file="tooltip_health_info.package"/>
	<include file="tooltip_mana_info.package"/>
	<include file="tooltip_movement_info.package"/>
	<include file="tooltip_unit_info.package"/>
	<include file="tooltip_experience_info.package"/>
	<include file="tooltip_hero_unit.package"/>
	<include file="tooltip_hero_health.package"/>
	<include file="tooltip_hero_mana.package"/>
	<include file="tooltip_hero_experience.package"/>
	<include file="tooltip_ally.package"/>

	<!-- Dynamic Textures -->
	<texture file="/ui/elements/line_break.tga" />
	<texture file="/ui/common/primary_strength.tga" />
	<texture file="/ui/common/primary_agility.tga" />
	<texture file="/ui/common/primary_intelligence.tga" />
	<texture file="/ui/common/primary_none.tga" />
	<texture file="/ui/common/share_none_none.tga"/>
	<texture file="/ui/common/share_none_courier.tga" />
	<texture file="/ui/common/share_none_full.tga" />
	<texture file="/ui/common/share_courier_none.tga" />
	<texture file="/ui/common/share_courier_courier.tga" />
	<texture file="/ui/common/share_courier_full.tga" />
	<texture file="/ui/common/share_full_none.tga" />
	<texture file="/ui/common/share_full_courier.tga" />
	<texture file="/ui/common/share_full_full.tga" />

	<!-- Dynamic Effects -->
	<effect file="/ui/common/models/choose/choose.effect" />
	<effect file="/ui/common/effects/score_sparks_out.effect" />
	<effect file="/ui/common/effects/score_sparks_in.effect" />
	<effect file="/ui/common/models/arcade_text/bloodlust.effect" />

	<!-- Dynamic Sounds -->
	<sample file="/shared/sounds/ui/ability_select.wav" />
	<sample file="/shared/sounds/ui/ability_refresh.wav" />
	<sample file="/shared/sounds/ui/levelup_ability.wav" />
	<sample file="/shared/sounds/ui/error.wav" />
	<sample file="/shared/sounds/ui/shop.wav" />
	<sample file="/shared/sounds/ui/popup.wav" />
	<sample file="/shared/sounds/ui/sell.wav" />
	<sample file="/shared/sounds/ui/shop_hide.wav" />

	<!-- Templates -->
	<template name="arcade_text">
		<modelpanel
			name="{msg}"
			visible="0"
			noclick="true"
			model="common/models/arcade_text/{msg}.mdf"
			anim="idle"
			camerapos="0 3800 0"
			cameraangles="0 0 180"
			camerafov="50"
			cameranear="1"
			carmerafar="5000"
			depthclear="false"
			depthcompress="true"

			sunazimuth="140"
			sunaltitude="10"
			suncolor="1.4 1.3 1"
			watch="{watch}"
			ontrigger="
				If({condition=true}, SetVisible(true));
				If({condition=true}, SetAnim('idle'));
				If({condition=true}, SetEffect('/ui/common/models/arcade_text/bloodlust.effect'));
				If({condition=true}, SleepWidget(1800, 'SetVisible(false);'));
				"
		/>
	</template>

	<template name="multi_select_unit">
		<panel width="4.0h" watch="SelectedVisible{index}" ontrigger="SetVisible(param);">
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="3" watch="SelectedColor{index}" ontrigger="SetBorderColor(param);"/>
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="3" color="0 0 0 .9"/>
			<frame texture="/ui/frames/roundframe.tga" watch="SelectedColor{index}" ontrigger="SetBorderColor(param);" borderthickness="3"/>

			<panel align="center" valign="center" width="85%" height="85%" float="bottom" padding="1%" color="invisible">
				<panel align="center" height="85@" width="85%" color="invisible" >
					<image
						watch="SelectedIcon{index}"
						ontrigger="SetTexture(param);"
						watch0="SelectedIllusion{index}"
						ontrigger0="If(param, SetRenderMode('grayscale'), SetRenderMode('normal')); If(param, SetColor('0.35 1.3 0.35'), SetColor('white'));"
					/>
				</panel>
				<panel height="7%" width="85%" color="black" watch="SelectedHealth{index}" ontrigger="SetVisible(param1 gt 0);">
					<panel color="red" watch="SelectedHealth{index}" ontrigger="SetWidth(FtoP(param2));"/>
					<panel color="yellow" watch="SelectedHealth{index}" ontrigger="SetWidth(FtoP(param2)); SetColor(1, 1, 0, Saturate((param2 * 2.5) - 0.25));" />
					<panel color="lime" watch="SelectedHealth{index}" ontrigger="SetWidth(FtoP(param2)); SetColor(0, 1, 0, Saturate((param2 * 2) - 1));" />
				</panel>
				<panel height="7%" width="85%" color="black" watch="SelectedMana{index}" ontrigger="SetVisible(param1 gt 0);">
					<panel color="blue" watch="SelectedMana{index}"  ontrigger="SetWidth(FtoP(param2));"/>
				</panel>
			</panel>
			
			<image
				texture="/ui/info/drop.tga"
				rendermode="additive"
				color="white"
				watch="SelectedActive{index}"
				ontrigger="SetVisible(param);"
			/>
			
			<panel
				color="invisible"
				onclick="SetControlUnit({index});"
				onrightclick="DeselectUnit({index});"
				onmouseover="ShowWidget('unit_tooltip_info{index}');"
				onmouseout="HideWidget('unit_tooltip_info{index}');"
			/>
		</panel>
	</template>

	<template name="command_tooltip">
		<frame name="command_tooltip{slot}" texture="/ui/frames/tooltip_bg.tga" color="#00000070" borderthickness="8" visible="false" x="-1@" y="-18.0h" align="right" valign="bottom" width="25@" height="10%">
			<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness="8"/>
			<label y="7%" width="90%" height="20%" align="center" font="dyn_10" color="white">{header}</label>
			<label y="27%" width="90%" height="90%" align="center" font="dyn_9" wrap="true" color="silver">{description}</label>
		</frame>
	</template>

	<template name="command_button">
		<panel>
			<image texture="{texture}"/>
			<panel>
				<button
					texture="/ui/elements/button_bevel.tga"
					onclick="PlaySound('/shared/sounds/ui/button_click_04.wav'); {onclick}"
					onrightclick="SecondaryAction({slot});"
					onmouseover="ShowWidget('command_tooltip{slot}');"
					onmouseout="HideWidget('command_tooltip{slot}');"
					interactive="false"
				/>
			</panel>
		</panel>
	</template>

	<!-- ability frame templates-->
	<template name="ability_frame_single">
		<!-- SINGLE-->
		<panel
			width="7.0h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontrigger="SetVisible(StringEquals('single', param));"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
		>
			<panel x="0" y="0" align="center" valign="center" height="4.25h" width="4.25h" >
				<instance name="ability_button" slot="{slot}"/>
			</panel>
			<image width="7.45h" height="7.45h" align="center" valign="center" texture="/ui/common/ability_frame.tga" noclick="1" />
		</panel>
	</template>

	<template name="ability_frame_single_plus_one">
		<!-- SINGLE plus ONE-->
		<panel
			width="10.5h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontrigger="SetVisible(StringEquals('single_plus_one', param));"
			sticky="true"
			stickytoinvis="false"
			visible="false"
		>
			<panel y="0.8h" noclick="1">
				<panel x="1.5h" y="1.1h" height="4.25h" width="4.25h" noclick="1">
					<instance name="ability_button" slot="{slot_a}"/>
				</panel>

				<panel x="6.4h" y="2.85h" height="2.5h" width="2.5h" noclick="1">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<image width="14.9h" height="7.45h" texture="/ui/common/ability_frame_1.tga" noclick="1" />
			</panel>
		</panel>
	</template>
	
	<template name="ability_frame_double">
		<!-- double-->
		<panel
			width="7h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontrigger="SetVisible(StringEquals('double', param));"
			sticky="true"
			stickytoinvis="false"
			visible="false"
		>
			<panel y="1.7h">
				<panel x="0.5h" y="1.0h" height="3.00h" width="3.00h" >
					<instance name="ability_button_small" slot="{slot_a}"/>
				</panel>

				<panel x="3.5h" y="1.0h" height="3.00h" width="3.00h">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>
			<!--	<image x="0h" y="0.5h" width="3.75h" height="3.75h" texture="/ui/common/ability_frame.tga" noclick="1" />
				<image x="3.25h" y="0.5h" width="3.75h" height="3.75h" texture="/ui/common/ability_frame.tga" noclick="1" /> -->

			</panel>
		</panel>
	</template>

	<template name="ability_frame_single_plus_two">
		<!-- SINGLE plus TWO-->
		<panel
			width="7h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontrigger="SetVisible(StringEquals('single_plus_two', param));"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
		>
			<panel y="1.7h" noclick="1">
				<panel align="center" x="0" y="-.13h" height="3.5h" width="3.5h" noclick="1">
					<instance name="ability_button" slot="{slot_a}"/>
				</panel>

				<panel x="1.7h" y="3.44h" height="1.9h" width="1.9h" noclick="1">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<panel x="3.62h" y="3.44h" height="1.9h" width="1.9h" noclick="1">
					<instance name="ability_button_small" slot="{slot_c}"/>
				</panel>
				<image height="14h" width="7h" y="-4.5h" texture="/ui/common/ability_frame_2.tga" noclick="1" />
			</panel>
		</panel>
	</template>

	<template name="ability_frame_triple">
		<!-- Triple-->
		<panel
			width="7h"
			height="100%"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontrigger="SetVisible(StringEquals('triple', param));"
			sticky="true"
			stickytoinvis="false"
			visible="false"
		>
			<panel y="1.7h">
				<panel x="0" y="-.265h" height="2.5h" width="2.5h" align="center">
					<instance name="ability_button_small" slot="{slot_a}"/>
				</panel>

				<panel x=".63h" y="2.6h" height="2.4h" width="2.4h">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<panel x="4.0h" y="2.6h" height="2.4h" width="2.4h">
					<instance name="ability_button_small" slot="{slot_c}"/>
				</panel>
				<image align="center" y="-1.5h" height="8h" width="8h" texture="/ui/common/ability_frame_3.tga" noclick="1" />
			</panel>
		</panel>
	</template>

	<template name="ability_button">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontrigger="SetVisible(!param);"
			>
				<image texture="/ui/legion/ability_coverup.tga"/>
			</panel>

			<panel
				watch="ActiveInventoryExists{slot}"
				ontrigger="SetVisible(param);"
				onclick="PrimaryAction({slot});"
				onrightclick="SecondaryAction({slot});"
				onmouseover="ShowWidget('ability_levelup_tooltip{slot}');"
				onmouseout="HideWidget('ability_levelup_tooltip{slot}');"
				watch2="EventActiveInventoryUpgrade{slot}"
				ontrigger2="If(IsVisible(), Call('effect_panel', 'StartEffect(\'/ui/common/models/choose/choose.effect\', ' # GetAbsoluteFractionX(0.5) / GetScreenWidth() # ', ' # GetAbsoluteFractionY(0.5) / GetScreenHeight() # ', \'1 1 1 1\');'));"
			>
				<image
					watch="ActiveInventoryIcon{slot}"
					ontrigger="SetTexture(param);"
					watch0="ActiveInventoryStatus{slot}"
					ontrigger0="If(param0, SetRenderMode('normal'), SetRenderMode('grayscale'));"
					noclick="true"
				/>

				<piegraph start="270" end="-90" square="true" color="#000000cc" watch="ActiveInventoryCooldown{slot}" ontrigger="SetVisible(param1 > 0); SetValue(param2);" noclick="true"/>

				<!-- Timer -->
				<label
					y="0.2h"
					width="100%"
					height="100%"
					textvalign="top"
					textalign="center"
					color="white"
					shadow="true"
					font="dyn_12"
					watch="ActiveInventoryHasTimer{slot}"
					ontrigger="SetVisible(param);"
					watch1="ActiveInventoryCooldown{slot}"
					ontrigger1="SetText(FtoT(param + 949));"
					noclick="true"
				/>
				
				<panel
					onmouseover="ShowWidget('ability_tooltip{slot}');"
					onmouseout="HideWidget('ability_tooltip{slot}');"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param5 > 0 or param7 == 0); If(param5 > 0 or param7 == 0, SetColor('white'), SetColor('invisible'));"
				/>

				<button
					texture="/ui/common/button_gloss.tga"
					rendermode="additive"
					onclick="PlaySound('/shared/sounds/ui/ability_select.wav'); PrimaryAction({slot}); ActivateTool({slot});"
					onrightclick="PlaySound('/shared/sounds/ui/ability_select.wav'); SecondaryAction({slot}); ActivateToolSecondary({slot});"
					onmouseover="ShowWidget('ability_tooltip{slot}');"
					onmouseout="HideWidget('ability_tooltip{slot}');"
					watch="ActiveInventoryCanActivate{slot}"
					ontrigger="SetVisible(param);"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1="SetEnabled(param5 > 0 or param7 == 0); If(param5 > 0 or param7 == 0, SetColor('#cccccc'), SetColor('invisible'));"
					interactive="false"
				/>

				<image
					texture="$white"
					rendermode="overlay"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="
						SetVisible(true);
						If(param5 == 0 and param7 > 0,
							SetColor('#404040'),
							If(param2,
								SetColor('#676045'),
								If(param3,
									SetColor('#4444ff'),
									SetVisible(false)
								)
							)
						);
						"
					noclick="true"
				/>

				<!--  silenced intentory section... can move or add a timer later -->
				<image align="center" valign="center" width="90%" height="90%" texture="elements/silence.tga" watch="Silenced" ontrigger="SetVisible(param);" color="1 1 1 1" noclick="1" visible="0"/>

				<panel
					width="38.5%"
					height="38.5%"
					align="right"
					valign="bottom"
					watch="ActiveInventoryCharges{slot}"
					ontrigger="SetVisible(param gt 0);"
					noclick="true"
					passivechildren="true"
					color="invisible"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1"/>
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_8" watch="ActiveInventoryCharges{slot}" ontrigger="SetText(param);"/>
				</panel>

				<!-- Refresh effect -->
				<modelpanel
					visible="0"
					noclick="true"
					model="common/models/refresh/refresh.mdf"
					anim="idle"
					effect="common/models/refresh/refresh.effect"
					camerapos="0 1 0"
					cameraangles="0 0 180"
					camerafov="45"
					cameranear="1"
					carmerafar="100"
					depthclear="false"
					depthcompress="true"
					watch="EventActiveInventoryReady{slot}"
					ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/refresh/refresh.effect'); SleepWidget(1333, 'SetVisible(false);');"
					onshow="PlaySound('/shared/sounds/ui/ability_refresh.wav'); "
				/>

				<!-- Targeting -->
				<frame
					borderthickness="4"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param8);"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>

					<modelpanel
						noclick="true"
						model="effects/portrait_lvlup/portrait_emitter.mdf"
						anim="idle"
						effect="effects/portrait_lvlup/ability_active.effect"
						camerapos="-1 10 0"
						cameraangles="0 0 180"
						camerafov="60"
						depthclear="false"
						depthcompress="true"
						onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
					/>
				</frame>

				<!-- Toggle active -->
				<frame
					borderthickness="2"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param1);"
					noclick="true"
					passivechildren="true"
				>
					<!--<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>-->
					<modelpanel
						visible="1"
						noclick="true"
						model="common/models/toggle/toggle.mdf"
						anim="idle"
						effect="common/models/toggle/toggle.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
						onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
					/>
				</frame>

				<!-- Activating -->
				<frame
					borderthickness="2"
					bordercolor="yellow"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param4);"
					noclick="true"
					passivechildren="true"
				>
					<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>
			</panel>
		</panel>
	</template>

	<template name="shared_ability_button">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontrigger="SetVisible(!param);"
			>
				<image texture="/ui/legion/ability_coverup.tga"/>
			</panel>

			<panel
				watch="ActiveInventoryExists{slot}"
				ontrigger="SetVisible(param);"
				onmouseover="ShowOnly('ability_levelup_tooltip_shared{slot}');"
				onmouseout="HideGroup('tooltip_group');"
				watch2="EventActiveInventoryUpgrade{slot}"
				ontrigger2="If(IsVisible(), Call('effect_panel', 'StartEffect(\'/ui/common/models/choose/choose.effect\', ' # GetAbsoluteFractionX(0.5) / GetScreenWidth() # ', ' # GetAbsoluteFractionY(0.5) / GetScreenHeight() # ', \'1 1 1 1\');'));"
			>
				<image
					watch="ActiveInventoryIcon{slot}"
					ontrigger="SetTexture(param);"
					watch0="ActiveInventoryStatus{slot}"
					ontrigger0="If(param0 and param11, SetRenderMode('normal'), SetRenderMode('grayscale'));"
					noclick="true"
				/>

				<piegraph start="270" end="-90" square="true" color="#000000cc" watch="ActiveInventoryCooldown{slot}" ontrigger="SetVisible(param1 > 0); SetValue(param2);" noclick="true"/>

				<panel
					onmouseover="ShowOnly('ability_tooltip_shared{slot}');"
					onmouseout="HideGroup('tooltip_group');"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param5 > 0 or param7 == 0); If(param5 > 0 or param7 == 0, SetColor('white'), SetColor('invisible'));"
				/>

				<button
					texture="/ui/common/button_gloss.tga"
					rendermode="additive"
					onclick="PlaySound('/shared/sounds/ui/ability_select.wav'); ActivateSharedTool({slot});"
					onrightclick="PlaySound('/shared/sounds/ui/ability_select.wav'); ActivateSharedToolSecondary({slot});"
					onmouseover="ShowOnly('ability_tooltip_shared{slot}');"
					onmouseout="HideGroup('tooltip_group');"
					watch="ActiveInventoryCanActivate{slot}"
					ontrigger="SetVisible(param);"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1="SetEnabled(param5 > 0 or param7 == 0); If(param5 > 0 or param7 == 0, SetColor('#cccccc'), SetColor('invisible'));"
					interactive="false"
				/>

				<image
					texture="$white"
					rendermode="overlay"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="
						SetVisible(true);
						If(param5 == 0 and param7 > 0,
							SetColor('#404040'),
							If(param2,
								SetColor('#676045'),
								If(param3,
									SetColor('#4444ff'),
									SetVisible(false)
								)
							)
						);
						"
					noclick="true"
				/>

				<panel
					width="38.5%"
					height="38.5%"
					align="right"
					valign="bottom"
					watch="ActiveInventoryCharges{slot}"
					ontrigger="SetVisible(param gt 0);"
					noclick="true"
					passivechildren="true"
					color="invisible"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1"/>
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_8" watch="ActiveInventoryCharges{slot}" ontrigger="SetText(param);"/>
				</panel>

				<!-- Refresh effect -->
				<modelpanel
					visible="0"
					noclick="true"
					model="common/models/refresh/refresh.mdf"
					anim="idle"
					effect="common/models/refresh/refresh.effect"
					camerapos="0 1 0"
					cameraangles="0 0 180"
					camerafov="45"
					cameranear="1"
					carmerafar="100"
					depthclear="false"
					depthcompress="true"
					watch="EventActiveInventoryReady{slot}"
					ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/refresh/refresh.effect'); SleepWidget(1333, 'SetVisible(false);');"
					onshow="PlaySound('/shared/sounds/ui/ability_refresh.wav'); "
				/>

				<!-- Targeting -->
				<frame
					borderthickness="4"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param8);"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>

					<modelpanel
						noclick="true"
						model="effects/portrait_lvlup/portrait_emitter.mdf"
						anim="idle"
						effect="effects/portrait_lvlup/ability_active.effect"
						camerapos="-1 10 0"
						cameraangles="0 0 180"
						camerafov="60"
						depthclear="false"
						depthcompress="true"
						onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
					/>
				</frame>

				<!-- Toggle active -->
				<frame
					borderthickness="2"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param1);"
					noclick="true"
					passivechildren="true"
				>
					<!--<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>-->
					<modelpanel
						visible="1"
						noclick="true"
						model="common/models/toggle/toggle.mdf"
						anim="idle"
						effect="common/models/toggle/toggle.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
						onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
					/>
				</frame>

				<!-- Activating -->
				<frame
					borderthickness="2"
					bordercolor="yellow"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param4);"
					noclick="true"
					passivechildren="true"
				>
					<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>
				
				<panel color="invisible" noclick="1" >
					<label  noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" shadow="1" font="dyn_10" watch="ActiveInventoryCooldown{slot}" ontrigger="SetVisible(param0); SetText(FtoT(param, 0, 0, '-') # 's');" >					
					
					</label>
				</panel>
			</panel>
		</panel>
	</template>
	
	<template name="inventory_button">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontrigger="SetVisible(!param);"
				color="invisible"
			>
				<image texture="/ui/common/empty_pack.tga"/>
			</panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontrigger="SetVisible(param);"
				onclick="PrimaryAction({slot});"
				onrightclick="SecondaryAction({slot});"
				onmouseover="ShowWidget('ability_tooltip{slot}');"
				onmouseout="HideWidget('ability_tooltip{slot}');"
			>
				<!-- Icon -->
				<image
					watch="ActiveInventoryIcon{slot}"
					ontrigger="SetTexture(param);"
					watch0="ActiveInventoryStatus{slot}"
					ontrigger0="If(param0, SetRenderMode('normal'), SetRenderMode('grayscale'));"
					noclick="true"
				/>

				<!-- Cooldown overlay-->
				<piegraph start="270" end="-90" square="true" color="#000000cc" watch="ActiveInventoryCooldown{slot}" ontrigger="SetVisible(param1 > 0); SetValue(param2);" noclick="true"/>

				<button
					texture="/ui/elements/button_bevel.tga"
					onclick="PrimaryAction({slot}); ActivateTool({slot});"
					onrightclick="SecondaryAction({slot});"
					onmouseover="ShowWidget('ability_tooltip{slot}');"
					onmouseout="HideWidget('ability_tooltip{slot}');"
					watch="ActiveInventoryCanActivate{slot}"
					ontrigger="SetVisible(param);"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1="SetEnabled(param5 > 0 or param7 == 0); If(param5 > 0 or param7 == 0, SetColor('white'), SetColor('invisible'));"
					interactive="false"
				/>

				<!-- Bevel -->
				<image
					texture="/ui/elements/button_bevel_up.tga"
					onmouseover="ShowWidget('ability_tooltip{slot}');"
					onmouseout="HideWidget('ability_tooltip{slot}');"
					watch="ActiveInventoryCanActivate{slot}"
					ontrigger="SetVisible(!param);"
					noclick="true"
				/>

				<!-- Color overlay -->
				<image
					texture="$white"
					rendermode="overlay"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="
						SetVisible(true);
						If(param5 == 0 and param7 > 0,
							SetColor('#404040'),
							If(param2,
								SetColor('#676045'),
								If(param3,
									SetColor('#4444ff'),
									SetVisible(false)
								)
							)
						);
						"
					noclick="true"
				/>

				<image
					width="20%" height="20%"
					texture="$yellow_checker"
					rendermode="normal"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param10);"
					noclick="true"
				/>

				<image
					width="20%" height="20%"
					texture="$red_checker"
					rendermode="normal"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param10 and !param9);"
					noclick="true"
				/>

				<panel
					width="38.5%"
					height="38.5%"
					align="right"
					valign="bottom"
					watch="ActiveInventoryCharges{slot}"
					ontrigger="SetVisible(param gt 0);"
					noclick="true"
					passivechildren="true"
					color="invisible"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1"/>
					<label
						width="100%"
						height="100%"
						textalign="center"
						textvalign="center"
						color="white"
						shadow="true"
						font="dyn_8"
						watch="ActiveInventoryCharges{slot}"
						ontrigger="SetText(param); If(param lt 10, SetFont('dyn_10'), SetFont('dyn_8'));"
					/>
				</panel>

				<!-- Refresh effect -->
				<modelpanel
					visible="0"
					noclick="true"
					model="common/models/refresh/refresh.mdf"
					anim="idle"
					effect="common/models/refresh/refresh.effect"
					camerapos="0 1 0"
					cameraangles="0 0 180"
					camerafov="45"
					cameranear="1"
					carmerafar="100"
					depthclear="false"
					depthcompress="true"
					watch="EventActiveInventoryReady{slot}"
					ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/refresh/refresh.effect'); SleepWidget(1333, 'SetVisible(false);');"
				/>

				<!-- Targeting -->
				<frame
					borderthickness="4"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param8);"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>
					<modelpanel
						noclick="true"
						model="effects/portrait_lvlup/portrait_emitter.mdf"
						anim="idle"
						effect="effects/portrait_lvlup/ability_active.effect"
						camerapos="-1 10 0"
						cameraangles="0 0 180"
						camerafov="60"
						depthclear="false"
						depthcompress="true"
						onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
					/>
				</frame>

				<!-- Toggle active -->
				<frame
					borderthickness="2"
					bordercolor="orange"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param1);"
					noclick="true"
					passivechildren="true"
				>
					<!--<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>-->
					<modelpanel
						visible="1"
						noclick="true"
						model="common/models/toggle/toggle.mdf"
						anim="idle"
						effect="common/models/toggle/toggle.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"

						onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
					/>
				</frame>

				<!-- Activating -->
				<frame
					borderthickness="2"
					bordercolor="yellow"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param4);"
					noclick="true"
					passivechildren="true"
				>
					<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>
			</panel>

			<panel
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(param); RefreshCursor();"
				onmouseover="SetColor('white');"
				onmouseout="SetColor('invisible');"
				onclick="ItemPlace({slot});"
				onrightclick="ItemPlace({slot});"
			/>
		</panel>
	</template>

	<template name="ability_button_small">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontrigger="SetVisible(!param);"
			>
				<image texture="/ui/legion/empty_pack.tga"/>
			</panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontrigger="SetVisible(param);"
				onclick="PrimaryAction({slot});"
				onrightclick="SecondaryAction({slot});"
				onmouseover="ShowWidget('ability_tooltip{slot}');"
				onmouseout="HideWidget('ability_tooltip{slot}');"
			>
				<image
					watch="ActiveInventoryIcon{slot}"
					ontrigger="SetTexture(param);"
					watch0="ActiveInventoryStatus{slot}"
					ontrigger0="If(param0, SetRenderMode('normal'), SetRenderMode('grayscale'));"
					noclick="true"
				/>
				<piegraph start="270" end="-90" square="true" color="#000000cc" watch="ActiveInventoryCooldown{slot}" ontrigger="SetVisible(param1 > 0); SetValue(param2);" noclick="true"/>
				<button
					texture="/ui/elements/button_bevel.tga"
					onclick="PrimaryAction({slot}); ActivateTool({slot});"
					onrightclick="SecondaryAction({slot});"
					onmouseover="ShowWidget('ability_tooltip{slot}');"
					onmouseout="HideWidget('ability_tooltip{slot}');"
					watch="ActiveInventoryCanActivate{slot}"
					ontrigger="SetVisible(param);"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1="SetEnabled(param5 > 0 or param7 == 0); If(param5 > 0 or param7 == 0, SetColor('white'), SetColor('invisible'));"
					interactive="false"
				/>
				<image
					texture="$white"
					rendermode="overlay"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="
						SetVisible(true);
						If(param5 == 0 and param7 > 0,
							SetColor('#404040'),
							If(param2,
								SetColor('#676045'),
								If(param3,
									SetColor('#4444ff'),
									SetVisible(false)
								)
							)
						);
						"
					noclick="true"
				/>


				<frame
					borderthickness="4"
					bordercolor="cyan"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param8);"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="cyan" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>
				<frame
					borderthickness="4"
					bordercolor="yellow"
					color="invisible"
					visible="false"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="SetVisible(param1 or param4);"
					noclick="true"
					passivechildren="true"
				>
					<image x="3" y="3" width="-6" height="-6" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
				</frame>
			</panel>
			<panel
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(param); RefreshCursor();"
				onmouseover="SetColor('white');"
				onmouseout="SetColor('invisible');"
				onclick="ItemPlace({slot});"
				onrightclick="ItemPlace({slot});"
			/>
		</panel>
	</template>

	<template name="inventory_info">
		<panel>
			<panel
				watch="SelectedInventoryExists{slot}"
				ontrigger="SetVisible(!param);"
			>
				<image texture="/ui/legion/empty_pack.tga"/>
			</panel>
			<panel
				watch="SelectedInventoryExists{slot}"
				ontrigger="SetVisible(param);"
				onmouseover="ShowWidget('inventory_info_tooltip{slot}');"
				onmouseout="HideWidget('inventory_info_tooltip{slot}');"
			>
				<image
					watch="SelectedInventoryIcon{slot}"
					ontrigger="SetTexture(param);"
					watch0="SelectedInventoryStatus{slot}"
					ontrigger0="If(param1 or param2, SetRenderMode('grayscale'), SetRenderMode('normal'));"
					noclick="true"
				/>
				<image
					texture="/ui/elements/button_bevel_up.tga"
					noclick="true"
				/>
				<panel
					width="42.00%"
					height="42.00%"
					align="right"
					valign="bottom"
					watch="SelectedInventoryCharges{slot}"
					ontrigger="SetVisible(param gt 0);"
					noclick="true"
					passivechildren="true"
					color="invisible"
				>
					<frame color="0 0 0 .7" bordercolor="white" borderthickness="1"/>
					<label textalign="center" textvalign="center" color="white" font="dyn_7" watch="SelectedInventoryCharges{slot}" ontrigger="SetText(param);"/>
				</panel>
				<image
					texture="$white"
					rendermode="overlay"
					watch="SelectedInventoryStatus{slot}"
					ontrigger="SetVisible(true); If(param1, SetColor('#676045'), If(param2, SetColor('#4444ff'), SetVisible(false)));"
					noclick="true"
				/>
			</panel>
		</panel>
	</template>

	<template name="ability_button_lvlup">
		<panel>
			<image texture="/ui/legion/empty_pack.tga"/>
			<panel watch="ActiveInventoryExists{slot}" ontrigger="SetVisible(param);">
				<image
					watch="ActiveInventoryIcon{slot}"
					ontrigger="SetTexture(param);"
					watch0="ActiveInventoryStatus{slot}"
					ontrigger0="If(param6, SetRenderMode('normal'), SetRenderMode('grayscale')); If(!param6, SetColor('#808080'), SetColor('white'));"
					noclick="true"
				/>
				<button
					texture="/ui/elements/button_roundhl.tga"
					onmouseover="ShowWidget('ability_levelup_tooltip{slot}');"
					onmouseout="HideWidget('ability_levelup_tooltip{slot}');"
					watch="ActiveInventoryStatus{slot}"
					ontrigger="
						If(param6,
							SetOnClick('PlaySound(\'/shared/sounds/ui/levelup_ability.wav\'); LevelUpAbility({slot});'),
							SetOnClick('PlaySound(\'/shared/sounds/ui/error.wav\');'));"
					onclick=""
					interactive="false"
				/>

				<panel x="-0.1h" y="-0.23h" width="1.7h" height="1.4h" align="center" valign="bottom" color="0 0 0 .5" noclick="true" passivechildren="true" watch="ActiveInventoryStatus{slot}" ontrigger="SetVisible(param5 gt 0);">
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" font="dyn_8" shadow="1" watch="ActiveInventoryStatus{slot}" ontrigger="SetText(param5);"/>
				</panel>

			</panel>
		</panel>
	</template>

	<template name="score_entry">
		<panel
			height="1.8h" align="center"
			watch="ScoreboardPlayer{index}"
			ontrigger="SetVisible(StringLength(param0) gt 0); SetTexture(param2);"
			visible="1"
			noclick="1"
		>
			<panel width="100%" align="center" float="right" color="invisible" noclick="1" passivechildren="true">
				<panel width="20@" height="96%" color="white" noclick="1" watch="ScoreboardPlayer{index}" ontrigger="SetColor(param3);" />
				<image
					x="0.5h"
					width="96@"
					height="96%"
					watch="ScoreboardPlayer{index}"
					ontrigger="SetTexture(param2); If(param8, SetRenderMode('normal'), SetRenderMode('grayscale'));"					
				/>

				<image
					x="0.5h"
					width="96@"
					height="96%"
					texture="/ui/legion/dead.tga"
					watch="ScoreboardPlayer{index}"
					ontrigger="SetVisible(!param8);"
				/>

				<label width="130@" height="100%" textalign="center" textvalign="center" font="dyn_9" color="#f6cd6d" shadow="true"
					watch="ScoreboardPlayer{index}"
					ontrigger="SetText(param4);"
				/>

				<label height="100%" textvalign="center" font="dyn_9" color="white" shadow="true"
					watch="ScoreboardPlayer{index}"
					ontrigger="SetText(param0);	SetColor(param3);"
				/>

				<panel x="0" width="9.0h" height="100%" align="right" float="right" color="invisible" noclick="1">
					<label width="28%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9"
						watch="ScoreboardPlayer{index}"
						ontrigger="SetText(param5);"
					/>
					<label width="28%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9"
						watch="ScoreboardPlayer{index}"
						ontrigger="SetText(param6);"
					/>
					<label width="44%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9"
						watch="ScoreboardPlayer{index}"
						ontrigger="SetText(param7);"
					/>
				</panel>

				<label x="0" width="2.0h" height="100%" textalign="center" textvalign="center" font="dyn_10" color="yellow" shadow="true" shadowcolor="black"
					watch="ScoreboardPlayerRespawn{index}"
					ontrigger="SetVisible(param gt 0); SetText(param);"
				/>
			</panel>
		</panel>
	</template>

	<template name="scores">
		<panel y="1.2h" x="0.2h" width="-6.7h" height="-1.0h" color="invisible" float="bottom" padding="0" noclick="1">
			<!-- Team 1 -->
			<panel height="2.0h" noclick="1">
				<instance
					name="header_bar"
					lbl_color="white"
					lbl_font="dyn_9"
					lbl="game_header_scores_team_one"
					watch="ScoreboardTeam1"
					ontrigger="SetText(param0);"
					show_close="0"
				/>
				<panel width="9.0h" height="100%" align="right" float="right" color="invisible" noclick="1">
					<label width="28%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" watch="ScoreboardTeam1" ontrigger="SetText(Round(param1));" noclick="1"/>
					<label width="28%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" watch="ScoreboardTeam1" ontrigger="SetText(Round(param2));" noclick="1"/>
					<label width="44%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" watch="ScoreboardTeam1" ontrigger="SetText(param3 # '/' # param4);" noclick="1"/>
				</panel>
			</panel>

			<panel height="1.8h" noclick="1">
				<instance name="tab_bar" align="center" />
				<panel width="100%" align="center" float="right" padding="0" noclick="1">
					<panel width="96@" noclick="1" />

					<panel width="150@" height="100%" noclick="1">
						<label height="100%" textalign="center" textvalign="center" color="#f6cd6d" shadow="true" font="dyn_9" noclick="1">game_scores_label_lvl</label>
					</panel>

					<label height="100%" textvalign="center" font="dyn_9" color="white" shadow="true" noclick="1">game_scores_label_player_name</label>

					<panel x="0" width="9.0h" height="100%" align="right" float="right" color="invisible" noclick="1">
						<panel width="28%" height="100%" color="invisible" noclick="1">
							<label height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" noclick="1">game_scores_label_k</label>
						</panel>
						<panel width="28%" height="100%" color="invisible" noclick="1">
							<label height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" noclick="1">game_scores_label_d</label>
						</panel>
						<panel width="44%" height="100%" color="invisible" noclick="1">
							<label height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" noclick="1">game_scores_label_a</label>
						</panel>
					</panel>
				</panel>
			</panel>
			<panel height="0.2h" color="invisible" noclick="1" />
			<instance name="score_entry" index="0"/>
			<instance name="score_entry" index="1"/>
			<instance name="score_entry" index="2"/>
			<instance name="score_entry" index="3"/>
			<instance name="score_entry" index="4"/>
			<panel height="0.4h" color="invisible" noclick="1" />

			<!-- Team 2 -->
			<panel height="2.0h" noclick="1">
				<instance
					name="header_bar"
					lbl_color="white"
					lbl_font="dyn_9"
					lbl="game_header_scores_team_two"
					watch="ScoreboardTeam2"
					ontrigger="SetText(param0);"
					show_close="0"
				/>
				<panel width="9.0h" height="100%" align="right" float="right" color="invisible" noclick="1">
					<label width="28%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" watch="ScoreboardTeam2" ontrigger="SetText(Round(param1));" noclick="1"/>
					<label width="28%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" watch="ScoreboardTeam2" ontrigger="SetText(Round(param2));" noclick="1"/>
					<label width="44%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" watch="ScoreboardTeam2" ontrigger="SetText(param3 # '/' # param4);" noclick="1"/>
				</panel>
			</panel>

			<panel height="1.8h" noclick="1">
				<instance name="tab_bar" align="center" />
				<panel width="100%" align="center" float="right" padding="0" noclick="1">
					<panel width="96@" noclick="1" />

					<panel width="150@" height="100%" noclick="1">
						<label height="100%" textalign="center" textvalign="center" color="#f6cd6d" shadow="true" font="dyn_9" noclick="1">game_scores_label_tab_lvl</label>
					</panel>

					<label height="100%" textvalign="center" font="dyn_9" color="white" shadow="true" noclick="1">game_scores_label_tab_player_name</label>


					<panel x="0" width="9.0h" height="100%" align="right" float="right" color="invisible" noclick="1">
						<panel width="28%" height="100%" color="invisible" noclick="1">
							<label height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" noclick="1">game_scores_label_tab_k</label>
						</panel>
						<panel width="28%" height="100%" color="invisible" noclick="1">
							<label height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" noclick="1">game_scores_label_tab_d</label>
						</panel>
						<panel width="44%" height="100%" color="invisible" noclick="1">
							<label height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" noclick="1">game_scores_label_tab_a</label>
						</panel>
					</panel>
				</panel>
			</panel>

			<panel height="0.2h" color="invisible" noclick="1" />
			<instance name="score_entry" index="5"/>
			<instance name="score_entry" index="6"/>
			<instance name="score_entry" index="7"/>
			<instance name="score_entry" index="8"/>
			<instance name="score_entry" index="9"/>

		</panel>
	</template>

	<template name="state_icon">
		<panel
			height="{height=100%}"
			width="{width=100@}"
			watch0="ActiveInventoryExists{slot}"
			ontrigger0="SetVisible(param);"
			onmouseover="ShowWidget('state_tooltip{slot}');"
			onmouseout="HideWidget('state_tooltip{slot}');"
			onhide="HideWidget('state_tooltip{slot}');"
			passivechildren="true"
		>
			<image
				watch="ActiveInventoryIcon{slot}"
				ontrigger="SetTexture(param);"
			/>
			<image
				texture="/ui/common/button_gloss_up.tga"
				rendermode="additive"
				color="#cccccc"
			/>
			<label
				font="dyn_14"
				textalign="center"
				textvalign="center"
				color="white"
				shadow="true"
				watch="ActiveInventoryCharges{slot}"
				ontrigger="SetVisible(param gt 0); SetText(param);"
			/>
		</panel>
	</template>

	<template name="hero_state_icon">
		<panel
			height="{height=100%}"
			width="{width=100@}"
			watch0="HeroInventoryExists{slot}"
			ontrigger0="SetVisible(param);"
			onmouseover="ShowWidget('hero_state_tooltip{slot}');"
			onmouseout="HideWidget('hero_state_tooltip{slot}');"
			onhide="HideWidget('hero_state_tooltip{slot}');"
			passivechildren="true"
		>
			<image
				watch="HeroInventoryIcon{slot}"
				ontrigger="SetTexture(param);"
			/>
			<image
				texture="/ui/common/button_gloss_up.tga"
				rendermode="additive"
				color="#cccccc"
			/>
			<label
				font="dyn_14"
				textalign="center"
				textvalign="center"
				color="white"
				shadow="true"
				watch="HeroInventoryCharges{slot}"
				ontrigger="SetVisible(param gt 0); SetText(param);"
			/>
		</panel>
	</template>

	<template name="state_info">
		<panel
			height="{height}"
			width="{width}"
			watch0="SelectedInventoryExists{slot}"
			ontrigger0="SetVisible(param);"
			onmouseover="ShowWidget('state_info_tooltip{slot}');"
			onmouseout="HideWidget('state_info_tooltip{slot}');"
			onhide="HideWidget('state_info_tooltip{slot}');"
			passivechildren="true"
		>
			<image
				watch="SelectedInventoryIcon{slot}"
				ontrigger="SetTexture(param);"
			/>
			<image
				texture="/ui/common/button_gloss_up.tga"
				rendermode="additive"
				color="#cccccc"
			/>
			<label
				font="dyn_14"
				textalign="center"
				textvalign="center"
				color="white"
				shadow="true"
				watch="SelectedInventoryCharges{slot}"
				ontrigger="SetVisible(param gt 0); SetText(param);"
			/>
		</panel>
	</template>

	<!-- Attack modifiers -->
	<template name="attack_modifier">
		<panel width="100@" height="100%" watch="AttackModifier{index}" ontrigger="SetVisible(!StringEmpty(param0));">
			<image watch="AttackModifier{index}" ontrigger="SetTexture(param1);" rendermode="grayscale" />
			<image watch="AttackModifier{index}" ontrigger="SetTexture(param1); SetVisible(param3);" />
			<button texture="/ui/elements/button_bevel.tga" watch="AttackModifier{index}" ontrigger="SetOnclick('SetExclusiveModifierSlot(GetCurrentControlUnit(), ' # param4 # ');');" interactive="false" />
			<frame color="invisible" bordercolor="1 1 1 .8" borderthickness="1" watch="AttackModifier{index}" ontrigger="SetVisible(param3);"/>
		</panel>
	</template>

	<!-- Status Bar Overlay -->
	<template name="statusbar_overlay">
		<image texture="/ui/legion/{barimage=behind_bar.tga}" rendermode="{rendermode=overlay}" color="{barcolor=1 1 1 1}"/>
		<image align="right" texture="/ui/legion/{barimage=behind_bar.tga}" width="1"  color="1 1 1 .5"/>
		<!--image align="right" texture="/ui/legion/bar_glow.tga" x="0.5h" width="1.0h" rendermode="additive" height="110%" valign="center" color="1 1 1 .5"/-->
	</template>

	<!-- Team Member Icon -->
	<template name="ally_ability_status">
		<image
			y="{y}"
			width="100%" height="100@"
			texture="/ui/common/ally_ability_led.tga"
			watch="AllyAbility{slot}Info{index}"
			ontrigger="
				If(param1, SetColor('silver'),
				If(param4, SetColor('red'),
				If(param12, SetColor('green'),
				If(param8 and param7, SetColor('yellow'),
				If(param5, SetColor('blue'),
				If(param2 or param3, SetColor('lime'),
				SetColor('orange')
				))))));"
		/>
	</template>

	<template name="team_member_icon">
		<panel y="{y}" width="7.45h" height="14.9h" noclick="1" sticky="true" stickytoinvis="false" watch="AllyExists{index}" ontrigger="SetVisible(param);" color="invisible">

			<!-- Portrait Icon -->
			<panel x="0.65h" y="0.75h" width="5.0h" height="5.0h" color="invisible">

				<image
					watch="AllyHeroInfo{index}"
					ontrigger="SetTexture(param1);"
					watch0="AllyStatus{index}"
					ontrigger0="If(param, SetRenderMode('normal'), SetRenderMode('grayscale')); If(param, SetColor('white'), SetColor('gray'));"
				/>

				<panel y="0.2h" watch="AllyStatus{index}" ontrigger="SetVisible(!param);">
					<image texture="/ui/legion/dead.tga" />
					<label font="dyn_10" color="yellow" shadow="true" textalign="center" textvalign="center" watch="AllyRespawn{index}" ontrigger="If(param1, SetText(Ceil(param0 / 1000)), SetText(''));"/>
				</panel>

				<panel watch="AllyDisconnected{index}" ontrigger="SetVisible(param);">
					<panel color="0 0 0 .5"/>
					<image x="0.2h" y="0.4h" width="90%" height="90@" texture="/ui/elements/disconnect.tga" />
					<label
						width="100%" height="100%"
						textalign="center" textvalign="bottom"
						color="white" shadow="true"
						font="dyn_10"
						watch0="AllyDisconnectTime{index}"
						ontrigger0="SetText(FtoT(param, 1, 0, '-'));"
					/>
				</panel>

				<panel watch="AllyLoadingPercent{index}" ontrigger="SetVisible(param lt 1);">
					<panel color="0 0 0 .5"/>
					<image x="0.5h" width="90%" height="90@" texture="/ui/elements/lobby/icon_loading.tga" />
					<label
						width="100%" height="100%"
						textalign="center" textvalign="bottom"
						color="white" shadow="true"
						font="dyn_10"
						watch0="AllyLoadingPercent{index}"
						ontrigger0="SetText(FtoP(param, 0) # '%');"
					/>
				</panel>

				<button
					color="invisible"
					onclick="SelectUnit(AllyIndex{index});"
					onmouseover="ShowWidget('ally_tooltip{index}');"
					onmouseout="HideWidget('ally_tooltip{index}');"
					interactive="false"
				/>

				<!-- Item catcher -->
				<panel
					color="invisible"
					texture="/ui/info/drop.tga"
					watch="ItemCursorVisible"
					ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
					onmouseover="SetColor('white');"
					onmouseout="SetColor('invisible');"
					onclick="ItemPlaceEntity(AllyIndex{index});"
					onrightclick="ItemPlaceEntity(AllyIndex{index});"
				/>

			</panel>

			<!-- Health / Mana Bars -->
			<panel x="0.6h" y="5.9h" width="5.8h" height="1.1h" color="black">
				<panel y="0" height="50%" valign="top" color="black">
					<panel color="red" watch="AllyHealth{index}" ontrigger="SetWidth(FtoP(param2));"/>
					<panel color="yellow" watch="AllyHealth{index}" ontrigger="SetWidth(FtoP(param2)); SetColor(1, 1, 0, Saturate((param2 * 2.5) - 0.25));"/>
					<panel color="lime" watch="AllyHealth{index}" ontrigger="SetWidth(FtoP(param2)); SetColor(0, 1, 0, Saturate((param2 * 2) - 1));"/>
				</panel>
				<panel y="0.5h" height="50%" color="black">
					<panel color="blue" watch="AllyMana{index}" ontrigger="SetWidth(FtoP(param2));"/>
				</panel>
			</panel>

			<image texture="/ui/common/ally_frame.tga" noclick="1" />

			<!-- Ally Share -->
			<panel x="0" y="0.15h" width="1.86h" height="1.86h" color="invisible">
				<image
					watch="AllyControlSharing{index}"
					ontrigger="
						If(param1 == 0,
							If(param0 == 0, SetTexture('/ui/common/share_none_none.tga'),
							If(param0 == 1, SetTexture('/ui/common/share_none_courier.tga'),
							SetTexture('/ui/common/share_none_full.tga')
							)),
						If(param1 == 1,
							If(param0 == 0, SetTexture('/ui/common/share_courier_none.tga'),
							If(param0 == 1, SetTexture('/ui/common/share_courier_courier.tga'),
							SetTexture('/ui/common/share_courier_full.tga')
							)),
						If(param0 == 0, SetTexture('/ui/common/share_full_none.tga'),
						If(param0 == 1, SetTexture('/ui/common/share_full_courier.tga'),
						SetTexture('/ui/common/share_full_full.tga')
						))));
					"
				/>
				<button color="invisible" watch="AllyPlayerInfo{index}" ontrigger="SetOnclick('CycleSharedControl(' # param2 # ');');" interactive="false" />
			</panel>

			<!-- Ally Level -->
			<panel x="5.25h" y="0.2h" width="1.5h" height="1.6h" color="invisible">
				<label width="100%" height="100%" textalign="center" textvalign="center" font="dyn_8" color="yellow" watch="AllyHeroInfo{index}" ontrigger="SetText(param2);"/>
			</panel>

			<!-- Ally Chat -->
			<panel x="0" y="4.0h" width="1.86h" height="1.86h" color="invisible">
				<image
					texture="/ui/common/chat.tga"
					watch="AllyVoice{index}"
					ontrigger="If(param1, SetColor('red'), If(param0, SetColor('lime'), SetColor('white')));"
				/>
				<button color="invisible" watch="AllyPlayerInfo{index}" ontrigger="SetOnclick('ToggleVoiceMute(' # param2 # ');');" />
			</panel>

			<!-- Ally Ability Status Lights -->
			<panel x="5.5h" y="2.1h" width="1.2h" height="3.8h" color="invisible" noclick="1" passivechildren="true" watch="AllyStatus{index}" ontrigger="SetVisible(param);">
				<instance name="ally_ability_status" y="0h" slot="0" index="{index}" />
				<instance name="ally_ability_status" y="0.9h" slot="1" index="{index}" />
				<instance name="ally_ability_status" y="1.8h" slot="2" index="{index}" />
				<instance name="ally_ability_status" y="2.7h" slot="3" index="{index}" />
			</panel>

		</panel>
	</template>

	<panel visible="1" name="arcade_messages"  width="80h" height="30h" y="0h" align="center" color="invisible" noclick="1">
		<instance name="arcade_text" msg="denied" watch="EventTowerDeny"/>
		<instance name="arcade_text" msg="bloodlust" watch="EventFirstKill"/>
		<instance name="arcade_text" msg="bloodbath" watch="EventKillStreak" condition="param == 7"/>
		<instance name="arcade_text" msg="hattrick" watch="EventMultiKill" condition="param == 1"/>
		<instance name="arcade_text" msg="genocide" watch="EventTeamWipe"/>
		<instance name="arcade_text" msg="nemesis" watch="EventNemesis"/>
		<instance name="arcade_text" msg="payback" watch="EventPayback"/>
		<instance name="arcade_text" msg="humiliation" watch="EventHumiliation"/>
	</panel>

	<!-- TOP -->
	<!-- Team Icons -->
	<panel name="" x="0" y="7.8h" width="7.45h" height="29.8h" color="invisible" watch="AllyDisplay" ontrigger="SetVisible(param);" noclick="1" reverse="true">
		<instance name="team_member_icon" y="0" index="0"/>
		<instance name="team_member_icon" y="7.4h" index="1"/>
		<instance name="team_member_icon" y="14.8h" index="2"/>
		<instance name="team_member_icon" y="22.2h" index="3"/>
	</panel>

	<!-- Hero Info -->
	<panel width="29.8h" height="14.9h" color="invisible" noclick="1">
		<!-- Icon / Lvl -->
		<panel x="0.2h" y="0.2h" width="6.6h" height="6.6h">

			<image watch="HeroIcon" ontrigger="SetTexture(param);" watch0="HeroStatus" ontrigger0="If(param, SetRenderMode('normal'), SetRenderMode('grayscale')); If(param, SetColor('white'), SetColor('gray'));"/>

			<image texture="/ui/legion/dead.tga" watch="HeroStatus" ontrigger="SetVisible(!param);"/>

			<!-- LvlUp Effect -->
			<panel watch="ActiveLevel"  ontrigger="SetVisible(param1 gt 0);" color="1 1 1 1" texture="/ui/legion/lvl_up_glow.tga" rendermode="additive">
				<modelpanel
					noclick="true"
					model="effects/portrait_lvlup/portrait_emitter.mdf"
					anim="idle"
					effect="effects/portrait_lvlup/portrait_lvlup.effect"
					camerapos="-1 0 0"
					cameraangles="0 0 180"
					camerafov="55"
					depthclear="false"
					depthcompress="true"
					onshow="SetEffect('/ui/effects/portrait_lvlup/portrait_lvlup.effect');"
				/>
			</panel>

			<!-- Item catcher -->
			<panel
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
				onmouseover="SetColor('white');"
				onmouseout="SetColor('invisible');"
				onclick="ItemPlaceHero();"
				onrightclick="ItemPlaceHero();"
			/>

			<!-- Respawn Timer -->
			<label
				width="100%" height="100%"
				textalign="center" textvalign="center"
				font="dyn_16"
				color="yellow"
				shadow="true"
				watch="HeroRespawn"
				ontrigger="SetText(If(!StringEquals(param0, ''), Ceil(param0 / 1000), ''));"
				watch0="HeroStatus"
				ontrigger0="SetVisible(!param);"
			/>

			<button
				texture="/ui/common/portrait_gloss.tga"
				color="#ffffffbb"
				onclick="SelectHero();"
				interactive="false"
				onmouseover="ShowWidget('unit_tooltip_hero');"
				onmouseout="HideWidget('unit_tooltip_hero');"
			/>

		</panel>

		<!-- Health / Mana Bars -->
		<panel x="7.2h" y="0.2h" width="12.7h" height="1.4h" color="black">
			<panel color="red" watch="HeroHealth" ontrigger="SetWidth(FtoP(param2));"/>
			<panel color="yellow" watch="HeroHealth" ontrigger="SetWidth(FtoP(param2)); SetColor(1, 1, 0, Saturate((param2 * 2.5) - 0.25));"/>
			<panel color="lime" watch="HeroHealth" ontrigger="SetWidth(FtoP(param2)); SetColor(0, 1, 0, Saturate((param2 * 2) - 1));"/>
			<instance name="statusbar_overlay"/>
			<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
			<panel color="invisible" onmouseover="ShowWidget('health_tooltip_hero');" onmouseout="HideWidget('health_tooltip_hero');" />
		</panel>
		<panel
			x="7.2h" y="1.8h" width="12.7h" height="1.4h"
			color="black"
			onmouseover="ShowWidget('mana_tooltip_hero');"
			onmouseout="HideWidget('mana_tooltip_hero');"
			passivechildren="true"
		>
			<image texture="/ui/legion/behind_bar.tga" color="0 .25 .4 1"/>
			<panel watch="HeroMana" ontrigger="SetVisible(param1 gt 0); SetWidth(FtoP(param2));">
				<instance name="statusbar_overlay" barimage="behind_bar2.tga" rendermode="" barcolor="0 .5 1 1" />
			</panel>
			<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
		</panel>


		<image texture="/ui/common/small_portrait_window.tga" noclick="1" />

		<!-- Collapse Team Icons Button -->
		<panel x="2.6h" y="5.8h" width="1.86h" height="1.86h" color="invisible">
			<button
				color="invisible"
				onclick="ToggleAllies();"
				interactive="false"
			>
				<widgetstate statename="up">
					<image texture="/ui/common/ally_hide_up.tga"  />
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/common/ally_hide_over.tga" />
				</widgetstate>
				<widgetstate statename="down">
					<image y="1" x="1" texture="/ui/common/ally_hide_up.tga" />
				</widgetstate>
			</button>
		</panel>

		<!-- Expand Team Icons Button -->
		<panel x="2.6h" y="5.8h" width="1.86h" height="1.86h" color="invisible" watch="AllyDisplay" ontrigger="SetVisible(!param);">
			<button
				color="invisible"
				onclick="ToggleAllies();"
				interactive="false"
			>
				<widgetstate statename="up">
					<image texture="/ui/common/ally_show_up.tga"  />
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/common/ally_show_over.tga" />
				</widgetstate>
				<widgetstate statename="down">
					<image y="1" x="1" texture="/ui/common/ally_show_up.tga" />
				</widgetstate>
			</button>
		</panel>


		<!-- Buyback Button -->
		<panel x="7.2h" y="0.2h" width="12.8h" height="3.1h" watch="HeroBuyBack" color="0 0 0 .7" ontrigger="SetVisible(param);">
			<instance
				name="button_game"
				width="-1.0h"
				height="2h"
				align="center"
				valign="center"
				borderthickness="0.6h"
				id="dev_buyback"
				font="dyn_10"
				onclick="BuyBack();"
			/>
			<label width="57%" height="100%" font="dyn_10" shadow="true" shadowoffset="2" color="white" textvalign="center" textalign="right" noclick="1" content="game_label_buy_back" />
			<label x="61%" width="40%" height="100%" font="dyn_10" shadow="true" shadowoffset="2" color="yellow" textvalign="center" textalign="left" watch="HeroBuyBackCost" noclick="1" ontrigger="SetText(param);" />
		</panel>

		<!-- Stats Icon -->
		<panel valign="top" align="left" height="1.7h" width="1.7h" color="invisible" onmouseover="ShowWidget('attribute_tooltip');" onmouseout="HideWidget('attribute_tooltip');">
			<image x="0.3h" y="0.25h" width="1.2h" height="1.2h" texture="/ui/elements/options_icon_stats.tga" noclick="1"/>
		</panel>

		<!-- Level -->
		<panel
			x="5.0h"
			y="5.1h"
			height="1.9h"
			width="1.9h"
			color="invisible"
			passivechildren="true"
			noclick="1"
		>
			<label width="100%" textalign="center" height="100%" textvalign="center" font="dyn_9" watch="HeroLevel" color="yellow" shadow="true" ontrigger="SetText(param0);"/>
		</panel>

		<!-- States -->
		<panel y="3.8h" x="7.9h" width="13.2h" height="2.0h" color="invisible" float="right" padding="0.25h">
			<anchor x="0.25h" valign="center" height="100%"  />
			<instance name="hero_state_icon" slot="9" />
			<instance name="hero_state_icon" slot="10" />
			<instance name="hero_state_icon" slot="11" />
			<instance name="hero_state_icon" slot="12" />
			<instance name="hero_state_icon" slot="13" />
			<instance name="hero_state_icon" slot="14" />
			<instance name="hero_state_icon" slot="15" />
			<instance name="hero_state_icon" slot="16" />
			<instance name="hero_state_icon" slot="17" />
			<instance name="hero_state_icon" slot="18" />
			<instance name="hero_state_icon" slot="19" />
		</panel>
	</panel>

	<!-- Legion Health -->
	<panel x="-10.0h" y="2.2h" height="7.45h" width="14.9h" align="center" noclick="1" color="invisible" watch="BaseHealth0" ontrigger="SetVisible(param lt 1);">

		<panel color="invisible" y="0.7h" x="0.9h" align="left" width="8.0h" height="1.5h">
			<panel color="yellow" watch="BaseHealth0" ontrigger="SetColor(0.2, 0.2, 0, Saturate((param * 2.5) - 0.25));"/>
			<panel color="lime" watch="BaseHealth0" ontrigger="SetColor(0, 0.2, 0, Saturate((param * 2) - 1));"/>
			<image texture="/ui/legion/behind_bar.tga" rendermode="overlay" color="1 1 1 1"/>
			<panel watch="BaseHealth0" ontrigger="SetWidth(FtoP(param));" color="0 0 0 0">
				<panel color="red" watch="BaseHealth0"/>
				<panel color="yellow" watch="BaseHealth0" ontrigger="SetColor(1, 1, 0, Saturate((param * 2.5) - 0.25));"/>
				<panel color="lime" watch="BaseHealth0" ontrigger="SetColor(0, 1, 0, Saturate((param * 2) - 1));"/>
				<instance name="statusbar_overlay"/>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
			</panel>
		</panel>
		<image texture="/ui/common/legion_health.tga" />
	</panel>

	<!-- Hellbourne Health -->
	<panel x="10.0h" y="2.2h" height="7.45h" width="14.9h" align="center" noclick="1" color="invisible" watch="BaseHealth1" ontrigger="SetVisible(param lt 1);">

		<panel color="invisible" y="0.7h" x="-0.9h" align="right" width="8.0h" height="1.5h">
			<panel color="yellow" watch="BaseHealth1" ontrigger="SetColor(0.2, 0.2, 0, Saturate((param * 2.5) - 0.25));"/>
			<panel color="lime" watch="BaseHealth1" ontrigger="SetColor(0, 0.2, 0, Saturate((param * 2) - 1));"/>
			<image texture="/ui/legion/behind_bar.tga" rendermode="overlay" color="1 1 1 1"/>
			<panel watch="BaseHealth1" ontrigger="SetWidth(FtoP(param));" color="0 0 0 0">
				<panel color="red" watch="BaseHealth1"/>
				<panel color="yellow" watch="BaseHealth1" ontrigger="SetColor(1, 1, 0, Saturate((param * 2.5) - 0.25));"/>
				<panel color="lime" watch="BaseHealth1" ontrigger="SetColor(0, 1, 0, Saturate((param * 2) - 1));"/>
				<instance name="statusbar_overlay"/>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
			</panel>
		</panel>
		<image texture="/ui/common/hellbourne_health.tga" />
	</panel>

	<!-- Clock -->
	<panel y="0" width="59.6h" height="7.45h" align="center" valign="top" noclick="1">

		<panel y="-7.2h" width="18.0h" height="18.0h" align="center" noclick="1">
			<image texture="/ui/common/clock_sun_moon.tga" align="center" valign="center" rotation="0" watch="DayTime" ontrigger="If(param, Rotate(0, 500), Rotate(180, 500));" noclick="1"/>
			<image width="50%" height="50%" align="center" valign="center" texture="/ui/common/clockface.tga" rotation="0" watch="TimeOfDay" ontrigger="SetRotation(param * 360);" noclick="1"/>
		</panel>

		<image texture="/ui/common/clockframe.tga" noclick="1" />

		<!--panel width="7.0h" height="5.0h" align="center" color="invisible" onmouseover="ShowWidget('tod_tooltip');" onmouseout="HideWidget('tod_tooltip');"/-->

		<!-- Hero K/D -->
		<panel x="-9.8h" y="-0.1h" width="11.0h" height="1.4h" align="center" color="invisible" noclick="1">
			<label x="0.3h" width="40%" height="100%" textalign="left" textvalign="center" font="dyn_9" color="white" content="game_label_hero_kd_hero"/>
			<label width="60%" height="100%" align="right" textalign="center" textvalign="center" font="dyn_9" color="white" watch="PlayerScore" ontrigger="SetText('^g' # param0 # '^* / ^r' # param1);"/>
		</panel>

		<!-- Creep Kills -->
		<panel x="10.0h" y="-0.1h" width="11.0h" height="1.4h" align="center" color="invisible" noclick="1">
			<label x="0.3h" width="40%" height="100%" textalign="left" textvalign="center" font="dyn_9" color="white" content="game_label_creep_kills_creep"/>
			<label width="60%" height="100%" align="right" textalign="center" textvalign="center" font="dyn_9" color="white" watch="PlayerScore" ontrigger="SetText('^g' # Round(param3 + param4) # '^* / ^y' # param5);"/>
		</panel>

		<!-- Game Time -->
		<label
			textalign="center" textvalign="top"
			height="1.6h"
			font="dyn_9"
			color="white"
			watch="MatchTime"
			ontrigger="If(param1, SetText(FtoT(param0, 1, 0, '-')), SetText(FtoT(param0, 1)));"
			noclick="1"
		/>

	</panel>

	<!-- Menu / Scores Buttons -->
	<panel width="29.8h" height="7.45h" align="right" noclick="1"> 
		<instance
			x="-2.9h" y="0.25h"
			width="5.6h" height="2.0h"
			align="right"
			name="button_game"
			label="game_scores_header_scores"
			id="menu"
			borderthickness="0.6h"
			font="dyn_9"
			onclick="Call('effect_panel', 'StartEffect(\'/ui/common/effects/score_sparks_out.effect\', ' # GetAbsoluteFractionX(1.4) / GetScreenWidth() # ', ' # GetAbsoluteFractionY(1.5) / GetScreenHeight() # ', \'1 1 1 1\');'); Call('scoreboard_holder', 'SlideX(\'2.7h\', 250);'); Call('scoreboard_gear', 'Rotate(1129, 250);'); ShowWidget('menu_close'); HideWidget('halfscore_out'); ShowWidget('halfscore_disabled');  HideWidget('scores_mini_show'); ShowWidget('scores_mini_hide');"
		/>
		
		<panel
			name="menu_close"
			x="-2.9h" y="0.25h"
			width="5.6h" height="2.0h"
			align="right"
			color="invisible"
			visible="0"
			noclick="1"
		>
			<instance
				name="button_game"
				label="game_scores_header_scores"
				id="menu"
				borderthickness="0.6h"
				onclick="Call('effect_panel', 'StartEffect(\'/ui/common/effects/score_sparks_in.effect\', ' # GetAbsoluteFractionX(1.4) / GetScreenWidth() # ', ' # GetAbsoluteFractionY(1.8) / GetScreenHeight() # ', \'1 1 1 1\');'); Call('scoreboard_holder', 'SlideX(\'28.3h\', 250);'); Call('scoreboard_gear', 'Rotate(0, 250);'); HideWidget('menu_close'); ShowWidget('halfscore_out'); HideWidget('halfscore_disabled'); HideWidget('scores_mini_hide'); ShowWidget('scores_mini_show');"
				font="dyn_9"
			/>
		</panel>		
		
		<instance
			x="-9.0h" y="0.25h"
			width="5.6h" height="2.0h"
			align="right"
			name="button_game"
			label="game_button_menu"
			id="menu"
			borderthickness="0.6h"
			font="dyn_9"
			onclick="ToggleMenu();"
		/>
		<image texture="/ui/common/scores_menu_buttons.tga" noclick="1"/>
	</panel>

	<!-- Scores Panel -->
	<panel name="scoreboard_holder" x="28.3h" y="3.3h" width="32.0h" height="29.8h" align="right" color="invisible" noclick="1">
		<panel x="4.8h" y="0" width="-1.0h" height="-1.0h" valign="center" color="0 0 0 .7" noclick="1">
			<instance name="scores"/>
		</panel>
		<image y="3.725h" width="7.45h" height="-7.45h" texture="/ui/common/score_frame_l.tga" noclick="1"/>
		<image x="7.4h" width="29.8h" height="3.725h" texture="/ui/common/score_frame_t.tga" noclick="1"/>
		<image width="7.45h" height="3.725h" texture="/ui/common/score_frame_tl.tga" noclick="1"/>
		<image x="7.4h" width="29.8h" height="3.725h" valign="bottom" texture="/ui/common/score_frame_b.tga" noclick="1"/>
		<image width="7.45h" height="3.725h" valign="bottom" texture="/ui/common/score_frame_bl.tga" noclick="1"/>
		
			<button
				name="scores_mini_show"
				visible="1"
				y="1h" x="1.7h" height="2h" width="2h"
				color="invisible"
				onmouseover="ShowWidget('halfscore_tooltip');"
				onmouseout="HideWidget('halfscore_tooltip');"
				onclick="HideWidget('scores_mini_show'); ShowWidget('scores_mini_hide'); Call('scoreboard_holder', 'SlideX(\'22.8h\', 250);'); Call('scoreboard_gear', 'Rotate(195, 250);');   "
				interactive="false"
			>
				<widgetstate statename="up">
					<image texture="/ui/common/score_half_slide_up.tga" noclick="1"/>
				</widgetstate>				
				<widgetstate statename="over">
					<image texture="/ui/common/score_half_slide_over.tga" noclick="1"/>
				</widgetstate>					
				<widgetstate statename="down" x="1" y="1">
					<image texture="/ui/common/score_half_slide_up.tga" noclick="1"/>
				</widgetstate>
			</button>		

			
			<button
				name="scores_mini_hide"
				visible="0"
				y="1h" x="1.7h" height="2h" width="2h"
				color="invisible"
				onmouseover="ShowWidget('halfscore_tooltip');"
				onmouseout="HideWidget('halfscore_tooltip');"
				onclick="HideWidget('scores_mini_hide'); ShowWidget('scores_mini_show'); Call('scoreboard_holder', 'SlideX(\'28.3h\', 250);'); Call('scoreboard_gear', 'Rotate(-195, 250);'); HideWidget('menu_close'); "
				interactive="false"
			>
				<widgetstate statename="up">
					<image texture="/ui/common/score_half_slide_up.tga" noclick="1"/>
				</widgetstate>				
				<widgetstate statename="over">
					<image texture="/ui/common/score_half_slide_over.tga" noclick="1"/>
				</widgetstate>					
				<widgetstate statename="down" x="1" y="1">
					<image texture="/ui/common/score_half_slide_up.tga" noclick="1"/>
				</widgetstate>
			</button>		
		<!--<instance name="simple_tooltip_floater" tip_id="halfscore_tooltip" width="20.0h" align="right" x="-1.0h" label="game_halfscores_tooltip"/>-->

	</panel>
	<image name="scoreboard_gear" x="1.3h" y="0" width="4.0h" height="4.0h" align="right" texture="/ui/common/scores_gear.tga" noclick="1"/>
	<!-- END TOP -->

	<!-- BOTTOM CENTER -->
	<panel x="-0.4h" width="119.2h" height="29.8h" align="center" valign="bottom" color="invisible" noclick="1">
		<!-- States -->
		<panel x="-19.0h" y="-14.4h" width="36h" height="3.2h" align="center" valign="bottom" float="right" padding="0.35h" noclick="true">
			<anchor x="0.25h" valign="center" height="100%"  />
			<instance name="state_icon" slot="9" />
			<instance name="state_icon" slot="10" />
			<instance name="state_icon" slot="11" />
			<instance name="state_icon" slot="12" />
			<instance name="state_icon" slot="13" />
			<instance name="state_icon" slot="14" />
			<instance name="state_icon" slot="15" />
			<instance name="state_icon" slot="16" />
			<instance name="state_icon" slot="17" />
			<instance name="state_icon" slot="18" />
			<instance name="state_icon" slot="19" />
		</panel>
		
	</panel>

	<panel x="-0.4h" width="119.2h" height="29.8h" align="center" valign="bottom" color="invisible" noclick="1">

		<panel height="11.8h" valign="bottom" color="black" noclick="1"/>

		<!-- Health -->
		<panel
			x="3.9h"
			y="-3.0h"
			width="26.6h"
			height="1.9h"
			align="center"
			valign="bottom"
			color=".5 0 0 .5"
			watch="ActiveHealth"
			ontrigger="SetVisible(param1 gt 0);"
			onmouseover="ShowWidget('health_tooltip');"
			onmouseout="HideWidget('health_tooltip');"
			passivechildren="true"
		>
			<panel color="1 0 0 0.2"/>
			<panel color="yellow" watch="ActiveHealth" ontrigger="SetColor(0.2, 0.2, 0, Saturate((param2 * 2.5) - 0.25));"/>
			<panel color="lime" watch="ActiveHealth" ontrigger="SetColor(0, 0.2, 0, Saturate((param2 * 2) - 1));"/>

			<image texture="/ui/legion/behind_bar.tga" rendermode="overlay" color="1 1 1 1"/>

			<panel watch="ActiveHealth" ontrigger="SetWidth(FtoP(param2));" color="0 0 0 0">
				<panel color="red" watch="ActiveHealth"/>
				<panel color="yellow" watch="ActiveHealth" ontrigger="SetColor(1, 1, 0, Saturate((param2 * 2.5) - 0.25));"/>
				<panel color="lime" watch="ActiveHealth" ontrigger="SetColor(0, 1, 0, Saturate((param2 * 2) - 1));"/>
				<instance name="statusbar_overlay"/>
			</panel>
			<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
			<label font="dyn_10" color="white" shadow="1" width="100%" height="100%" textalign="center" textvalign="center" watch="ActiveHealth" ontrigger="SetText(Ceil(param0) # '/' # Ceil(param1));" />
		</panel>

		<!-- Mana -->
		<panel
			x="3.9h"
			y="-0.5h"
			width="26.6h"
			height="1.9h"
			align="center"
			valign="bottom"
			color="0 0 1 .5"
			onmouseover="ShowWidget('mana_tooltip');"
			onmouseout="HideWidget('mana_tooltip');"
			passivechildren="true"
		>
			<image texture="/ui/legion/behind_bar.tga" color="0 .25 .4 1"/>
			<panel watch="ActiveMana" ontrigger="SetVisible(param1 gt 0); SetWidth(FtoP(param2));">
				<instance name="statusbar_overlay" barimage="behind_bar2.tga" rendermode="" barcolor="0 .5 1 1" />
			</panel>
			<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
			<label font="dyn_10" color="white" shadow="1" width="100%" height="100%" textalign="center" textvalign="center" watch="ActiveMana" ontrigger="If(param1 == 0, ClearText(), SetText(Ceil(param0) # '/' # Ceil(param1)));"/>
		</panel>


		<!-- Level Up Buttons -->
		<panel x="9.5h" y="11.4h" width="59.6h" height="29.8h" align="center" valign="bottom" color="invisible" noclick="1" watch="ActiveLevel" ontrigger="If(param2 or param1 gt 0, SlideY('11.4h', 250), SlideY(15.6h, 250));">
			<panel y="0.7h" x="4.3h" height="4.1h" width="4.1h">
				<panel valign="center" align="center" height="72%" width="72@">
					<instance name="ability_button_lvlup" slot="4"/>
				</panel>
			</panel>
			<panel y="0.4h" x="11.3h" height="4.4h" width="4.4h">
				<panel valign="center" align="center" height="72%" width="72@">
					<instance name="ability_button_lvlup" slot="0"/>
				</panel>
			</panel>
			<panel y="0.4h" x="18.5h" height="4.4h" width="4.4h">
				<panel valign="center" align="center" height="72%" width="72@" >
					<instance name="ability_button_lvlup" slot="1"/>
				</panel>
			</panel>
			<panel y="0.4h" x="25.5h" height="4.4h" width="4.4h">
				<panel valign="center" align="center" height="72%" width="72@">
					<instance name="ability_button_lvlup" slot="2"/>
				</panel>
			</panel>
			<panel y="0.4h" x="32.5h" height="4.4h" width="4.4h">
				<panel valign="center" align="center" height="72%" width="72@">
					<instance name="ability_button_lvlup" slot="3"/>
				</panel>
			</panel>
			<image texture="/ui/common/pop_up.tga" noclick="true" />

			<!-- Popup Gears L/R -->
			<image x="-3.3h" y="1.75h" width="3.9h" height="3.9h" texture="/ui/common/pop_up_gear.tga" noclick="true" onload="Rotate(180, 1);"/>
			<image x="42.0h" y="1.75h" width="3.9h" height="3.9h" texture="/ui/common/pop_up_gear.tga" noclick="true" />

		</panel>


		<!-- Portrait -->
		<panel x="-20.1h" y="-1.3h" width="10.3h" height="10.3h" valign="bottom" align="center">
			<image
				watch0="ActivePortrait"
				ontrigger0="SetTexture(param);"
				watch1="ActiveStatus ActiveIllusion"
				ontrigger1="If(ActiveStatus and !ActiveIllusion, SetRenderMode('normal'), SetRenderMode('grayscale')); If(ActiveIllusion, SetColor('0.35 1.3 0.35'), If(ActiveStatus, SetColor('white'), SetColor('gray')));"
				onmouseldown="PlaySound('/shared/sounds/ui/center_view.wav'); Action('PortraitCenter', 1.0);"
				onmouselup="Action('PortraitCenter', 0.0);"
				onmouseover="ShowWidget('unit_tooltip');"
				onmouseout="HideWidget('unit_tooltip');"
			/>
			<button
				color="invisible"
				watch="ToolTargetingEntity"
				ontrigger="SetVisible(ToolTargetingEntity); RefreshCursor();"
				onclick="SelectUnit(ActiveIndex);"
			/>
			<panel color="black" noclick="1" />
			<modelpanel
				visible="1"
				noclick="true"
				model="/core/null/null.mdf"
				anim="portrait"

				camerapos="0 1 26"
				cameraangles="0 0 200"
				camerafov="25"
				cameranear="1"
				carmerafar="100"
				depthclear="false"
				depthcompress="true"

				sunazimuth="120"
				sunaltitude="50"
				suncolor="0.9 0.9 0.9"
				ambientcolor="0.6 0.7 0.7"
				onshow="SetAnim('portrait'); SetEffect('/ui/common/models/portrait/light.effect');"
				watch="ActiveModel"
				ontrigger="SetModel(param);"
				watch0="ActivePlayerInfo"
				ontrigger0="SetTeamColor(param1);"
				watch1="ActiveStatus"
				ontrigger1="SetVisible(param);"
			/>

			<image texture="/ui/common/portrait_gloss_up.tga" color="1 1 1 .8" rendermode="additive" noclick="true" />
			<panel name="glow" noclick="1" watch="ActiveLevel"  ontrigger="SetVisible(param1 gt 0); "
				x="0"
				y="0"
				color="1 .6 0 1"
				texture="/ui/legion/lvl_up_glow.tga"
				rendermode="additive"
			>



				<modelpanel
					noclick="true"
					model="effects/portrait_lvlup/portrait_emitter.mdf"
					anim="idle"
					effect="effects/portrait_lvlup/portrait_lvlup.effect"
					camerapos="-1 10 0"
					cameraangles="0 0 180"
					camerafov="45"
					cameranear="1"
					camerafar="1000"
					depthclear="false"
					depthcompress="true"
					onshow="SetEffect('/ui/effects/portrait_lvlup/portrait_lvlup.effect');"
				/>
			</panel>
		</panel>

		<!-- EXP / Lifetime Bar -->
		<panel x="-20.1h" y="-0.3h" width="12.5h" height="12.5h" valign="bottom" align="center" color="invisible" noclick="1">

			<!-- exp bar section-->
			<panel watch="ActiveLifetime" ontrigger="SetVisible(param1 le 0);" visible="false" noclick="true" pasivechildren="true">
				<!-- this is the dark purple backer -->
				<piegraph texture="/ui/common/exp_ring.tga" start="225" end="-49" square="1" color=".1 0 .3 1" value="1" noclick="true"/>

				<!-- heres the actual exp bar this eneds teh exp watch. Needs to be a 0 - 1 value for hwo lvled up you are.-->
				<piegraph texture="/ui/common/exp_ring.tga"  watch="ActiveExperience" ontrigger="SetValue(param3);" start="225" end="-49" square="1" color="0.7 0 1 1" value=".2" noclick="true"/>

				<!-- the following is the start of adding a leading edge to the bar but setend and start doesnt seem to be effecting the bar. Once it is ill get the math working to draw a highlight at the leading edge of the exp bar
				<piegraph texture="/ui/common/exp_ring.tga"  watch="ActiveExperience" ontrigger="SetValue(param3); SetStart(param3); SetEnd(param3);" start="225" end="-49" square="1" color="0 1 0 1" value=".2" noclick="true"/>
				-->
			</panel>

			<modelpanel
				noclick="true"
				model="common/models/lvlup/lvlup.mdf"
				anim="idle"
				effect="common/models/lvlup/lvlup.effect"
				camerapos="0 1 0"
				cameraangles="0 0 180"
				cameranear="-20"
				camerafar="100"
				camerafov="19.5"
				depthclear="false"
				depthcompress="true"
				visible="false"
				watch="EventActiveLevelup"
				ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/lvlup/lvlup.effect'); SleepWidget(1000, 'SetVisible(false);');"
			/>

			<!-- lifetime bar section-->
			<panel watch="ActiveLifetime" ontrigger="SetVisible(param1 gt 0);" visible="false" noclick="true" pasivechildren="true">
				<piegraph texture="/ui/common/exp_ring.tga" start="225" end="-49" square="1" color=".2 .2 .1 1" value="1" noclick="true"/>
				<piegraph texture="/ui/common/exp_ring.tga" watch="ActiveLifetime" ontrigger="SetValue(param2);" start="225" end="-49" square="1" color="#e5df2f" value=".2" noclick="true"/>

				<label width="100%" height="100%" valign="center" textalign="center" textvalign="center" font="dyn_14" color="white" shadow="true" shadowoffset="2" watch="ActiveLifetime" ontrigger="SetText(Ceil(param0 / 1000) # ' s');" />
			</panel>
		</panel>

		<!-- Detailed Stats Background -->
		<panel x="-28.7h" y="4.7h" width="15.65h" height="15.65h" align="center" valign="bottom" color="1 1 1 1" float="bottom" padding="0.3h" texture="/ui/common/stat_background.tga" noclick="1"/>

		<!-- Large Gear -->
		<image x="-20.23h" y="5.3h" width="23.8h" height="23.8h" align="center" valign="bottom" texture="/ui/common/gear_large.tga" rotation="0" watch="ActiveLevel" ontrigger="If(param2 or param1 gt 0, Rotate(0, 250), Rotate(30, 250));" noclick="true"/>

		<!-- Detail Stats -->
		<panel x="-28.8h" y="4.7h" width="15.65h" height="15.65h" align="center" valign="bottom" color="invisible" float="bottom" padding="0.3h" noclick="1">
			<!-- Damage -->
			<panel y="0.9h" x="0.4h" height="2.0h" width="10.0h" watch="ActiveDamage" ontrigger="SetVisible(param1 != 0);" onmouseover="ShowWidget('attack_tooltip');" onmouseout="HideWidget('attack_tooltip');" passivechildren="true">
				<image width="2.0h" height="2.0h" texture="/ui/legion/damage_icon.tga"/>
				<label width="-2.0h" height="100%" align="right" font="dyn_9" color="white" shadow="1" textalign="left" textvalign="center"
					watch="ActiveDamage"
					ontrigger="SetText(' ' # Round(param0 + param2) # ' - ' # Round(param1 + param2));"
				/>
			</panel>
			<!-- Armor -->
			<panel height="2.0h" width="10.0h" onmouseover="ShowWidget('defense_tooltip');" onmouseout="HideWidget('defense_tooltip');" passivechildren="true">
				<image width="2.0h" height="2.0h" texture="/ui/legion/armor_icon.tga"/>
				<label width="-2.0h" height="100%" align="right" font="dyn_9" color="white" shadow="1" textalign="left" textvalign="center"
					watch="ActiveArmor"
					ontrigger="SetText(' ' # FtoA(param1, 2));"
				/>
			</panel>
			<!-- Movement Speed -->
			<panel height="2.0h" width="10.0h" onmouseover="ShowWidget('movement_tooltip');" onmouseout="HideWidget('movement_tooltip');" passivechildren="true">
				<image width="2.0h" height="2.0h" texture="/ui/legion/move_speed_icon.tga"/>
				<label width="-2.0h" height="100%" align="right" font="dyn_9" color="white" shadow="1" textalign="left" textvalign="center"
					watch="ActiveMoveSpeed"
					ontrigger="SetText(' ' # Round(param1));"
				/>
			</panel>
			<!-- Attributes -->
			<panel height="2.0h" width="10.0h" color="invisible" float="right" watch="ActiveHasAttributes" ontrigger="SetVisible(param);" onmouseover="ShowWidget('attribute_tooltip');" onmouseout="HideWidget('attribute_tooltip');" passivechildren="true">
				<image width="2.0h" height="2.0h" texture="/ui/legion/plus_icon.tga"/>
				<label width="-2.0h" height="100%" font="dyn_9" color="white" shadow="1" textalign="left" textvalign="center"
					watch="ActiveAttributes"
					ontrigger="
						If(param3 == 0, SetText(' ^773' # Round(param0) # '^* ' # Round(param1) # ' ' # Round(param2)),
							If(param3 == 1, SetText(' ' # Round(param0) # ' ^773' # Round(param1) # '^* ' # Round(param2)),
								If(param3 == 2, SetText(' ' # Round(param0) # ' ' # Round(param1) # ' ^773' # Round(param2)),
									SetText(' ' # Round(param0) # ' ' # Round(param1) # ' ' # Round(param2)))));
					"
				/>
			</panel>
		</panel>

		<!-- Hero Name -->
		<panel x="-27.0h" y="-11.4h" width="19.0h" height="2.2h" align="center" valign="bottom" color="0 0 0 1" noclick="true" passivechildren="true">
			<label x="0.5h" font="dyn_12" color="white" shadow="1" height="100%" textalign="left" textvalign="center" watch="ActiveName" ontrigger="SetText(param);"/>
		</panel>

		<!-- Error Messages -->
		<textbuffer
			x="4.5h"
			y="-18.0h"
			width="63h"
			height="7h"
			align="center"
			valign="bottom"
			textalign="center"
			font="dyn_14"
			fadecolor="white"
			fadetime="5000"
			color="invisible"
			textcolor="#F0E68C"
			shadow="true"
			shadowcolor="black"
			shadowoffset="2"
			wrap="false"
			anchorbottom="true"
			usesmileys="false"
			usescrollbar="false"
			watch="ErrorMessage"
			ontrigger="TextBufferCmd(param);"
			noclick="true"
			maxlines="3"
		/>

		<!-- Shop Indicator -->
		<panel
			name="item_shop_sign"
			onshow=""
			watch="PlayerCanShop"
			ontrigger="If(param, SetVisible(true), SleepWidget(250, 'SetVisible(false);')); If(param, SlideY('-2.6h', 250), SlideY('3h', 250));"
			visible="true"
			x="32.2h" y="3h" width="8h" height="16h" valign="bottom" align="center"
		>
			<image texture="/ui/common/item_shop_sign.tga" noclick="1" />
			<animatedimage name="animated_shop_sign" onshow="StartAnim();" height="4.5h" width="4.5h" y="1.3h" valign="top" align="center" fps="25" loop="true" loopbackframe="-1" texture="common/sign/sign.tga" />
			<button
				color="invisible"
				onmouseover="ShowWidget('shop_tooltip');"
				onmouseout="HideWidget('shop_tooltip');"
				onclick="Call('animated_shop_sign', 'StartAnim();'); PlaySound('/shared/sounds/ui/shop.wav'); If(ItemCursorVisible and PlayerCanShop, Sell(), ToggleShop());"
			/>
		</panel>


		<!-- Inventory -->
		<panel x="28.4h" y="-0.7h" width="16.0h" height="13.4h" align="center" valign="bottom" color="invisible" noclick="1">
			<!-- Gold Amt / Shop Button -->
			<panel width="8.4h" height="2.8h" color="0 0 0 1">

				<!--<image y="0.3h" x="0.3h" width="1.7h" height="1.7h" valign="center" texture="/ui/common/gold.tga" noclick="1" />-->
				<label y="0.3h" x="2.3h" height="100%" align="left" textalign="left" textvalign="center" font="dyn_9" color="white" watch="PlayerGold" ontrigger="SetText(param);"></label>
				<button
					color="invisible"
					onmouseover="ShowWidget('shop_tooltip');"
					onmouseout="HideWidget('shop_tooltip');"
					onclick="PlaySound('/shared/sounds/ui/shop.wav'); If(ItemCursorVisible and PlayerCanShop, Sell(), ToggleShop());"
				/>
			</panel>

			<instance name="simple_tooltip" tip_id="shop_tooltip" x="-4.2h" y="-3.8h" width="13.0h" height="2.8h" align="left" label="game_button_open_close_shop" visible="0"/>
		</panel>

		<!-- Backpack -->
		<panel height="50%" noclick="1" valign="bottom">
			<panel x="79h" y="3.7h" width="18h" height="12h" />

			<panel x="67.14%" y="27.34%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="25"/>
			</panel>
			<panel x="71.73%" y="27.34%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="26"/>
			</panel>
			<panel x="76.32%" y="27.34%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="27"/>
			</panel>

			<panel x="67.14%" y="63.67%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="28"/>
			</panel>
			<panel x="71.73%" y="63.67%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="29"/>
			</panel>
			<panel x="76.32%" y="63.67%" width="4.00%" height="32.03%">
				<instance name="inventory_button" slot="30"/>
			</panel>
		</panel>

		<!-- Center Framing -->
		<image height="50%" x="25%" align="right" width="25%" texture="/ui/common/bot_center_cap.tga" noclick="1" valign="bottom" />
		<image height="50%" x="-25%" align="left" width="25%" texture="/ui/common/bot_center_cap.tga" noclick="1" valign="bottom" />
		<image height="50%" texture="/ui/common/bot_center.tga" noclick="1" valign="bottom" />

		<animatedimage watch="EventPlayerGold" ontrigger="StartAnim();" name="animated_gold"  onshow="StartAnim();" height="6h" width="3h" y="13.3h" x="21.2h" valign="top" align="center" fps="30" loop="true" startframe="5" numframes="-1" loopbackframe="-1" texture="common/gold/gold.tga" noclick="true" />

		<!-- Inventory Cover -->
		<panel x="35.0h" y="3.8h" width="29.8h" height="14.9h" align="center" valign="bottom" noclick="1">
			<image texture="/ui/common/inventory_cover.tga" noclick="1" watch="ActiveHasInventory" ontrigger="SetVisible(!param);"/>
		</panel>

		<!-- Level Indicator-->
		<panel x="-17.4h" y="-10.6h" height="2.9h" width="2.9h" valign="bottom" align="center" color="invisible" passivechildren="true" onmouseover="ShowWidget('experience_tooltip');" onmouseout="HideWidget('experience_tooltip');">
			<label width="100%" height="100%" textalign="center" textvalign="center" font="dyn_12" watch="ActiveLevel" color="yellow" shadow="true" ontrigger="SetText(param0);"/>
		</panel>

		<!-- Primary Icon -->
		<panel
			x="32.75h"
			y="0.4h"
			height="3.7h"
			width="3.7h"
			valign="bottom"
			color="invisible"
			onmouseover="ShowWidget('attribute2_tooltip');"
			onmouseout="HideWidget('attribute2_tooltip');"
			passivechildren="true"
		>
			<image watch="ActiveAttributeInfo" ontrigger="SetTexture('/ui/common/primary_' # param11 # '.tga');" rendermode="normal" />
		</panel>


		<!-- Level Up Claws -->
		<panel x="9.5h" y="11.4h" width="59.6h" height="29.8h" align="center" valign="bottom" color="invisible" noclick="1" watch="ActiveLevel" ontrigger="If(param2 or param1 gt 0, SlideY('11.4h', 250), SlideY(15.6h, 250));">
			<image height="12.5%" texture="/ui/common/pop_up_claws.tga" noclick="true"/>
		</panel>


		<!-- Abilities -->
		<panel x="3.9h" y="-5.1h" width="28.0h" height="8.0h" align="center" valign="bottom" color="invisible" noclick="1">

			<panel name="panel_abilities" width="100%" align="center" float="right" color="invisible" padding="0" noclick="0">

				<instance name="ability_frame_single" slot="0"/>
				<instance name="ability_frame_single_plus_one" slot="0" slot_a="0" slot_b="5"/>
				<instance name="ability_frame_single_plus_two" slot="0" slot_a="0" slot_b="5" slot_c="6"/>
				<instance name="ability_frame_triple" slot="0" slot_a="5" slot_b="6" slot_c="7"/>
				<instance name="ability_frame_double" slot="0" slot_a="5" slot_b="6" />

				<instance name="ability_frame_single" slot="1"/>
				<instance name="ability_frame_single_plus_one" slot="1" slot_a="1" slot_b="5"/>
				<instance name="ability_frame_single_plus_two" slot="1" slot_a="1" slot_b="5" slot_c="6"/>
				<instance name="ability_frame_triple" slot="1" slot_a="5" slot_b="6" slot_c="7"/>
				<instance name="ability_frame_double" slot="1" slot_a="5" slot_b="6" />

				<instance name="ability_frame_single" slot="2"/>
				<instance name="ability_frame_single_plus_one" slot="2" slot_a="2" slot_b="5"/>
				<instance name="ability_frame_single_plus_two" slot="2" slot_a="2" slot_b="5" slot_c="6"/>
				<instance name="ability_frame_triple" slot="2" slot_a="5" slot_b="6" slot_c="7"/>
				<instance name="ability_frame_double" slot="2" slot_a="5" slot_b="6" />

				<instance name="ability_frame_single" slot="3"/>
				<instance name="ability_frame_single_plus_one" slot="3" slot_a="3" slot_b="5"/>
				<instance name="ability_frame_single_plus_two" slot="3" slot_a="3" slot_b="5" slot_c="6"/>
				<instance name="ability_frame_triple" slot="3" slot_a="5" slot_b="6" slot_c="7"/>
				<instance name="ability_frame_double" slot="3" slot_a="5" slot_b="6" />

				<panel width="0.0h" height="0.0h"
					onframe="If(IsVisible(), Call('panel_abilities', 'SetWidth(' # GetX() # ');'));"
					sticky="true"
					stickytoinvis="false"
				/>

			</panel>

		</panel>


		<!-- Ability Selection Toggle -->
		<panel x="-13.7h" y="-9.8h" width="4.2h" height="4.2h" align="center" valign="bottom">
			<panel x="1.0h" y="1.0h" width="1.8h" height="1.8h" color="black">
				<button
					x="-0.15h" y="0"
					align="center"
					valign="center"
					width="1.4h"
					height="1.4h"
					color="invisible"
					numstates="2"
					cvar="cg_displayLevelup"
					onclick="PlaySound('/shared/sounds/ui/popup.wav');"
					interactive="false"
				>

				<widgetstate statename="up">
					<image texture="/ui/common/ability_toggle_up.tga"  />
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/common/ability_toggle_up_over.tga" />
				</widgetstate>
				<widgetstate statename="down">
					<image y="1" x="1" texture="/ui/common/ability_toggle_up_over.tga" />
				</widgetstate>

				<widgetstate statename="up2">
					<image texture="/ui/common/ability_toggle_down.tga" />
				</widgetstate>
				<widgetstate statename="over2">
					<image texture="/ui/common/ability_toggle_down_over.tga" />
				</widgetstate>
				<widgetstate statename="down2">
					<image y="1" x="1" texture="/ui/common/ability_toggle_down_over.tga" />
				</widgetstate>


				</button>
			</panel>
			<panel x="1.0h" y="1.0h" width="1.8h" height="1.8h" color="black" watch="ActiveLevel" ontrigger="SetVisible(param1 gt 0);">
				<label x="-0.1h" y="-0.1h" width="100%" height="100%" textalign="center" textvalign="center" font="dyn_10" watch="ActiveLevel" color="yellow" shadow="true" ontrigger="SetText(param1);" noclick="true"/>
			</panel>
			<image texture="/ui/common/ability_toggle.tga" noclick="1" />
		</panel>

	</panel>
	<!-- END BOTTOM CENTER -->

	<!-- BOTTOM LEFT -->
	<!-- Attack Modifiers -->
	<panel x="0.6h" y="-26.5h" width="23.0h" height="3.2h" align="left" valign="bottom" float="right" padding="0.5h" color="invisible" noclick="true">
		<instance name="attack_modifier" index="0"/>
		<instance name="attack_modifier" index="1"/>
		<instance name="attack_modifier" index="2"/>
		<instance name="attack_modifier" index="3"/>
		<instance name="attack_modifier" index="4"/>
		<instance name="attack_modifier" index="5"/>
		<instance name="attack_modifier" index="6"/>
		<instance name="attack_modifier" index="7"/>
	</panel>

	<!-- Mini Map -->
	<panel width="29.8h" height="29.8h" align="left" valign="bottom" noclick="true">
		<map x="0.5h" y="-0.5h" width="23.2h" height="23.2h" align="left" valign="bottom" name="minimap" texture="!minimap_texture" watch="Minimap" onclick="If(MinimapClick(param0, param1), BreakDrag());" onrightclick="If(MinimapRightClick(param0, param1), BreakDrag());"/>
		<image texture="/ui/common/bot_left.tga" valign="bottom" noclick="1" />
	</panel>
	<!-- END BOTTOM LEFT -->

	<!-- BOTTOM RIGHT -->
	<!-- Unit Selection -->
	<panel width="29.8h" height="29.8h" align="right" valign="bottom" color="invisible" noclick="1">
		<!-- Unit Selected -->
		<panel name="no_select_panel" color="invisible" visible="1" noclick="1" height="50%" valign="bottom" watch="SelectedVisible0" ontrigger="SetVisible(!param);">
			<panel x="32.23%" y="28.52%" width="15.63%" height="31.25%">
				<instance name="command_button" slot="1" texture="/shared/icons/move.tga" onclick="OrderMove();"/>
			</panel>

			<panel x="50.59%" y="28.52%" width="15.63%" height="31.25%">
				<instance name="command_button"  slot="2" texture="/shared/icons/attack.tga" onclick="OrderAttack();"/>
			</panel>

			<panel x="69.34%" y="28.52%" width="15.63%" height="31.25%">
				<instance name="command_button"  slot="3" texture="/shared/icons/stop.tga" onclick="OrderStop();"/>
			</panel>

			<panel x="32.23%" y="66.02%" width="15.63%" height="31.25%">
				<instance name="command_button" slot="4" texture="/shared/icons/hold.tga" onclick="OrderHold();"/>
			</panel>

			<panel x="50.59%" y="66.02%" width="15.63%" height="31.25%">
				<instance name="command_button" slot="5" texture="/shared/icons/patrol.tga" onclick="OrderPatrol();"/>
			</panel>

			<panel x="69.34%" y="66.02%" width="15.63%" height="31.25%">
				<instance name="inventory_button" slot="8"/>
			</panel>

			<!-- Framing -->
			<image texture="/ui/common/bot_right_orders.tga" noclick="1" />
		</panel>


		<!-- Info - Units/Heroes -->
		<panel group="selected_info" watch="SelectedVisible0 SelectedVisible1 SelectedType0" ontrigger="SetVisible(SelectedVisible0 and !SelectedVisible1 and !StringEquals(SelectedType0, 'building'));" color="invisible" noclick="1">

			<panel width="24.0h" height="16.0h" align="right" valign="bottom" color="black"/>

			<!-- Icon -->
			<panel x="-17.1h" y="-8.7h" height="6.0h" width="6.0h" align="right" valign="bottom">
				<image texture="/ui/legion/portrait_background.tga" color="1 1 1 1"/>
				<image
					watch="SelectedIcon0"
					ontrigger="SetVisible(StringLength(param) gt 0); SetTexture(param);"
					watch0="SelectedIllusion0"
					ontrigger0="If(param, SetRenderMode('grayscale'), SetRenderMode('normal')); If(param, SetColor('0.35 1.3 0.35'), SetColor('white'));"
					onmouseldown="Action('PortraitCenterInfo', 1.0);"
					onmouselup="Action('PortraitCenterInfo', 0.0);"
					onmouseover="ShowWidget('unit_tooltip_info0');"
					onmouseout="HideWidget('unit_tooltip_info0');"
					onhide="Action('PortraitCenterInfo', 0.0);"
				/>
				<image texture="/ui/common/portrait_gloss_up.tga" color="#ffffffbb" noclick="true" />
			</panel>

			<!-- Item catcher -->
			<panel
				x="-17.1h" y="-8.7h" height="6.0h" width="6.0h"
				align="right" valign="bottom"
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
				onmouseover="SetColor('white');"
				onmouseout="SetColor('invisible');"
				onclick="ItemPlaceSelected(0);"
				onrightclick="ItemPlaceSelected(0);"
			/>

			<!-- Inventory -->
			<panel x="-1.75h" y="-0.4h" width="11.9h" height="7.9h" align="right" valign="bottom" color="invisible">
				<panel height="3.9h" width="3.9h" align="left" valign="top" color="invisible">
					<instance name="inventory_info" slot="25"/>
				</panel>
				<panel height="3.9h" width="3.9h" align="center" valign="top" color="invisible">
					<instance name="inventory_info" slot="26"/>
				</panel>
				<panel height="3.9h" width="3.9h" align="right" valign="top" color="invisible">
					<instance name="inventory_info" slot="27"/>
				</panel>

				<panel height="3.9h" width="3.9h" align="left" valign="bottom" color="invisible">
					<instance name="inventory_info" slot="28"/>
				</panel>
				<panel height="3.9h" width="3.9h" align="center" valign="bottom" color="invisible">
					<instance name="inventory_info" slot="29"/>
				</panel>
				<panel height="3.9h" width="3.9h" align="right" valign="bottom" color="invisible">
					<instance name="inventory_info" slot="30"/>
				</panel>
			</panel>

			<!-- Health -->
			<panel
				x="-1.2h"
				y="-10.8h"
				width="14.5h"
				height="1.4h"
				align="right" valign="bottom"
				color="0 .2 0 0"
				watch="SelectedHealth0"
				ontrigger="SetVisible(param1 gt 0);"
				onmouseover="ShowWidget('health_tooltip_info');"
				onmouseout="HideWidget('health_tooltip_info');"
				passivechildren="true"
			>
				<panel color="red" watch="SelectedHealth0"/>
				<panel color="yellow" watch="SelectedHealth0" ontrigger="SetColor(1, 1, 0, Saturate((param2 * 2.5) - 0.25));"/>
				<panel color="lime" watch="SelectedHealth0" ontrigger="SetColor(0, 1, 0, Saturate((param2 * 2) - 1));"/>
				<panel color="0 0 0 .75"/>
				<panel watch="SelectedHealth0" ontrigger="SetWidth(FtoP(param2));" color="0 1 0 1">
					<panel color="red" watch="SelectedHealth0"/>
					<panel color="yellow" watch="SelectedHealth0" ontrigger="SetColor(1, 1, 0, Saturate((param2 * 2.5) - 0.25));"/>
					<panel color="lime" watch="SelectedHealth0" ontrigger="SetColor(0, 1, 0, Saturate((param2 * 2) - 1));"/>

					<instance name="statusbar_overlay"/>

				</panel>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
				<label font="dyn_8" color="white" shadow="1" width="100%" height="100%" textalign="center" textvalign="center" watch="SelectedHealth0" ontrigger="If(param2 lt 0, SetText(Translate('game_invulnerable')), SetText(Ceil(param0) # '/' # Ceil(param1)));"/>
			</panel>

			<!-- Mana -->
			<panel
				x="-1.2h"
				y="-9.0h"
				width="14.5h"
				height="1.4h"
				align="right" valign="bottom"
				color="0 0 .1 1"
				watch="SelectedMana0"
				ontrigger="SetVisible(param1 gt 0);"
				onmouseover="ShowWidget('mana_tooltip_info');"
				onmouseout="HideWidget('mana_tooltip_info');"
				passivechildren="true"
			>
				<panel watch="SelectedMana0" ontrigger="SetWidth(FtoP(param2));" color="0 .4 1 1">

					<instance name="statusbar_overlay"/>

				</panel>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
				<label font="dyn_8" color="white" shadow="1" width="100%" height="100%" textalign="center" textvalign="center" watch="SelectedMana0" ontrigger="SetText(Ceil(param0) # '/' # Ceil(param1));"/>
			</panel>


			<!-- Framing -->
			<image texture="/ui/common/bot_right.tga" noclick="1" />

			<!-- Level -->
			<panel x="-0.7h" y="-12.2h" height="3.6h" width="3.6h" valign="bottom" align="right"
				passivechildren="true"
				onmouseover="ShowWidget('experience_tooltip_info');"
				onmouseout="HideWidget('experience_tooltip_info');"
				watch="SelectedLevel0"
				ontrigger="SetVisible(param1);"
			>
				<image x="-0.5h" y="-0.5h" width="5.0h" height="5.0h" texture="/ui/common/ability_toggle.tga" noclick="true" />
				<label width="100%" textalign="center" height="100%" textvalign="center" font="dyn_9" watch="SelectedLevel0" color="yellow" shadow="true" ontrigger="SetText(param0);"/>
			</panel>

			<!-- Name -->
			<label x="0.7h" y="-13.2h" width="-13.2h" height="1.6h" align="right" valign="bottom" textalign="left" textvalign="center" color="white" font="dyn_10" watch="SelectedName0" ontrigger="SetText(param);" shadow="true" shadowoffset="2" noclick="true" />


			<!-- Selected Stats -->
			<panel x="-14.5h" y="-1.0h" width="8.8h" height="6.8h" align="right" valign="bottom" color="invisible" float="bottom" padding="0.25h">
				<!-- Damage -->
				<panel height="1.6h" watch="SelectedDamage" ontrigger="SetVisible(param1 != 0);" onmouseover="ShowWidget('attack_tooltip_info');" onmouseout="HideWidget('attack_tooltip_info');" passivechildren="true">
					<image width="100@" height="100%" texture="/ui/legion/damage_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedDamage"
						ontrigger="SetText(' ' # Round(param0 + param2) # ' - ' # Round(param1 + param2));"
					/>
				</panel>
				<!-- Armor -->
				<panel height="1.6h" onmouseover="ShowWidget('defense_tooltip_info');" onmouseout="HideWidget('defense_tooltip_info');" passivechildren="true">
					<image width="100@" height="100%" texture="/ui/legion/armor_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedArmor"
						ontrigger="SetText(' ' # FtoA(param1, 2));"
					/>
				</panel>
				<!-- Movement Speed -->
				<panel height="1.6h" watch="SelectedMoveSpeed" ontrigger="SetVisible(param1 != 0);" onmouseover="ShowWidget('movement_tooltip_info');" onmouseout="HideWidget('movement_tooltip_info');" passivechildren="true">
					<image width="100@" height="100%" texture="/ui/legion/move_speed_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedMoveSpeed"
						ontrigger="SetText(' ' # Round(param1));"
					/>
				</panel>
				<!-- Attributes -->
				<panel height="1.6h" color="invisible" float="right" watch="SelectedHasAttributes" ontrigger="SetVisible(param);" onmouseover="ShowWidget('attribute_tooltip_info');" onmouseout="HideWidget('attribute_tooltip_info');" passivechildren="true">
					<image width="100@" height="100%" texture="/ui/legion/plus_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedAttributes"
						ontrigger="SetText(' ' # Round(param0) # ' ' # Round(param1) # ' ' # Round(param2));"
					/>
				</panel>
			</panel>

			<!-- States -->
			<panel x="-1.0h" y="-18.0h" width="24.0h" height="2.4h" align="right" valign="bottom" color="invisible" float="right" padding="0.5h" noclick="1">
				<anchor x="0" y="0" />
				<instance name="state_info" width="2.4h" height="2.4h" slot="9" />
				<instance name="state_info" width="2.4h" height="2.4h" slot="10" />
				<instance name="state_info" width="2.4h" height="2.4h" slot="11" />
				<instance name="state_info" width="2.4h" height="2.4h" slot="12" />
				<instance name="state_info" width="2.4h" height="2.4h" slot="13" />
				<instance name="state_info" width="2.4h" height="2.4h" slot="14" />
			</panel>

			<!-- Targetting Catcher -->
			<button
				color="invisible"
				watch="ToolTargetingEntity"
				ontrigger="SetVisible(param); RefreshCursor();"
				onclick="SelectUnit(SelectedIndex0);"
			/>
		</panel>


		<!-- Info - Buildings -->
		<panel name="info_buildings" visible="1" color="invisible" noclick="1" watch="SelectedVisible0 SelectedVisible1 SelectedType0" ontrigger="SetVisible(SelectedVisible0 and !SelectedVisible1 and StringEquals(SelectedType0, 'building'));">

			<panel width="24.0h" height="12.0h" align="right" valign="bottom" color="black"/>

			<!-- Icon -->
			<panel x="-17.1h" y="-4.8h" height="6.0h" width="6.0h" align="right" valign="bottom">
				<image texture="/ui/legion/portrait_background.tga" color="1 1 1 1"/>
				<image
					watch="SelectedIcon0"
					ontrigger="SetVisible(StringLength(param) gt 0); SetTexture(param);"
					watch0="SelectedIllusion0"
					ontrigger0="If(param, SetRenderMode('grayscale'), SetRenderMode('normal')); If(param, SetColor('0.35 1.3 0.35'), SetColor('white'));"
					onmouseldown="Action('PortraitCenterInfo', 1.0);"
					onmouselup="Action('PortraitCenterInfo', 0.0);"
					onmouseover="ShowWidget('unit_tooltip_info0');"
					onmouseout="HideWidget('unit_tooltip_info0');"
					onhide="Action('PortraitCenterInfo', 0.0);"
				/>
				<image texture="/ui/common/portrait_gloss_up.tga" color="#ffffffbb" noclick="true" />
			</panel>

			<!-- Item catcher -->
			<panel
				x="-17.1h" y="-4.8h" height="6.0h" width="6.0h"
				align="right" valign="bottom"
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
				onmouseover="SetColor('white');"
				onmouseout="SetColor('invisible');"
				onclick="ItemPlaceSelected(0);"
				onrightclick="ItemPlaceSelected(0);"
			/>

			<!-- Health -->
			<panel
				x="-1.2h"
				y="-7.0h"
				width="14.5h"
				height="1.4h"
				align="right" valign="bottom"
				color="0 .2 0 0"
				watch="SelectedHealth0"
				ontrigger="SetVisible(param1 gt 0);"
				onmouseover="ShowWidget('health_tooltip_info');"
				onmouseout="HideWidget('health_tooltip_info');"
				passivechildren="true"
			>
				<panel color="red" watch="SelectedHealth0"/>
				<panel color="yellow" watch="SelectedHealth0" ontrigger="SetColor(1, 1, 0, Saturate((param2 * 2.5) - 0.25));"/>
				<panel color="lime" watch="SelectedHealth0" ontrigger="SetColor(0, 1, 0, Saturate((param2 * 2) - 1));"/>
				<panel color="0 0 0 .75"/>
				<panel watch="SelectedHealth0" ontrigger="SetWidth(FtoP(param2));" color="0 1 0 1">
					<panel color="red" watch="SelectedHealth0"/>
					<panel color="yellow" watch="SelectedHealth0" ontrigger="SetColor(1, 1, 0, Saturate((param2 * 2.5) - 0.25));"/>
					<panel color="lime" watch="SelectedHealth0" ontrigger="SetColor(0, 1, 0, Saturate((param2 * 2) - 1));"/>

					<instance name="statusbar_overlay"/>

				</panel>
				<image width="-0.6h" align="center" texture="/ui/elements/bar_highlight.tga"/>
				<label font="dyn_8" color="white" shadow="1" width="100%" height="100%" textalign="center" textvalign="center" watch="SelectedHealth0" ontrigger="If(param2 lt 0, SetText(Translate('game_invulnerable')), SetText(Ceil(param0) # '/' # Ceil(param1)));"/>
			</panel>

			<!-- Framing -->
			<image height="50%" valign="bottom" texture="/ui/common/bot_right_structure.tga" noclick="1" />

			<!-- Level -->
			<panel x="-0.7h" y="-8.3h" height="3.6h" width="3.6h" valign="bottom" align="right"
				passivechildren="true"
				onmouseover="ShowWidget('experience_tooltip_info');"
				onmouseout="HideWidget('experience_tooltip_info');"
				watch="SelectedLevel0"
				ontrigger="SetVisible(param1);"
			>
				<image x="-0.5h" y="-0.5h" width="5.0h" height="5.0h" texture="/ui/common/ability_toggle.tga" noclick="true" />
				<label width="100%" textalign="center" height="100%" textvalign="center" font="dyn_9" watch="SelectedLevel0" color="yellow" shadow="true" ontrigger="SetText(param0);"/>
			</panel>

			<!-- Name -->
			<label x="0.7h" y="-9.3h" width="-13.2h" height="1.6h" align="right" valign="bottom" textalign="left" textvalign="center" color="white" font="dyn_10" watch="SelectedName0" ontrigger="SetText(param);" shadow="true" shadowoffset="2" noclick="true" />

			<!-- Selected Stats -->
			<panel x="-14.9h" y="-0.8h" width="8.8h" height="3.3h" align="right" valign="bottom" color="invisible" float="bottom" padding="0.2h">

				<!-- Selected Damage -->
				<panel width="-0.25h" height="1.7h" align="right" watch="SelectedDamage" ontrigger="SetVisible(param1 != 0);" onmouseover="ShowWidget('attack_tooltip_info');" onmouseout="HideWidget('attack_tooltip_info');" passivechildren="true">
					<image width="1.7h" height="1.7h" texture="/ui/legion/damage_icon.tga"/>
					<label width="-1.5h" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedDamage"
						ontrigger=
						"
							If(param1 == 0.0,
								ClearText(),
								If(param2 == 0.0,
									SetText(' ' # Round(param0) # ' - ' # Round(param1)),
									If(param2 > 0.0,
										SetText(' ' # Round(param0) # ' - ' # Round(param1) # ' ^g+' # Round(param2)),
										SetText(' ' # Round(param0) # ' - ' # Round(param1) # ' ^r' # Round(param2))
									)
								)
							);
						"
					/>
				</panel>

				<!-- Selected Armor -->
				<panel width="-0.25h" height="1.7h" align="right" onmouseover="ShowWidget('defense_tooltip_info');" onmouseout="HideWidget('defense_tooltip_info');" passivechildren="true">
					<image width="1.7h" height="1.7h" texture="/ui/legion/armor_icon.tga"/>
					<label width="-1.7h" height="100%" align="right" font="dyn_8" color="white" shadow="1" textalign="left" textvalign="center"
						watch="SelectedArmor"
						ontrigger=
						"
							If(param1 - param0 == 0.0,
								SetText(' ' # FtoA(param0, 2)),
								If(param1 - param0 > 0.0,
									SetText(' ' # FtoA(param0, 2) # ' ^g+' # FtoA(param1 - param0, 2)),
									SetText(' ' # FtoA(param0, 2) # ' ^r' # FtoA(param1 - param0, 2))
								)
							);
						"
					/>
				</panel>

			</panel>
		</panel>

		<!-- Multiple Selected -->
		<panel watch="SelectedVisible0 SelectedVisible1" ontrigger="SetVisible(SelectedVisible0 and SelectedVisible1);" noclick="1">

			<panel width="24.0h" height="13.0h" align="right" valign="bottom" color="black"/>

			<!-- Framing -->
			<image texture="/ui/common/bot_right_multi.tga" noclick="1" />

			<panel name="multi_select_panel" x="-0.8h" y="-0.4h" width="21.4h" height="13.8h" align="right" valign="bottom" color="invisible" visible="1" float="bottom" padding="0.2h">
				<panel y="0.5h" height="4.2h" float="right" padding="0.1h">
					<instance name="multi_select_unit" index="0"/>
					<instance name="multi_select_unit" index="1"/>
					<instance name="multi_select_unit" index="2"/>
					<instance name="multi_select_unit" index="3"/>
					<instance name="multi_select_unit" index="4"/>
				</panel>

				<panel height="4.2h" float="right" padding="0.1h">
					<instance name="multi_select_unit" index="5"/>
					<instance name="multi_select_unit" index="6"/>
					<instance name="multi_select_unit" index="7"/>
					<instance name="multi_select_unit" index="8"/>
					<instance name="multi_select_unit" index="9"/>
				</panel>

				<panel height="4.2h" float="right" padding="0.1h">
					<instance name="multi_select_unit" index="10"/>
					<instance name="multi_select_unit" index="11"/>
					<instance name="multi_select_unit" index="12"/>
					<instance name="multi_select_unit" index="13"/>
					<instance name="multi_select_unit" index="14"/>
				</panel>
			</panel>
		</panel>
		
		<!-- Stash -->
		<instance name="stash"/>
	</panel>
	<!-- END BOTTOM RIGHT -->

	<instance name="old_shop"/>
	
	<!-- Tooltips -->
	<instance name="command_tooltip" slot="1" header="Move" description="Moves units to a target position."/>
	<instance name="command_tooltip" slot="2" header="Attack" description="Issues and attack command. Your units will move to the area or target unit and attack." />
	<instance name="command_tooltip" slot="3" header="Stop" description="Stops your unit from completing any previously given order." />
	<instance name="command_tooltip" slot="4" header="Hold" description="Holds position and will not attack any units." />
	<instance name="command_tooltip" slot="5" header="Patrol" description="The unit will move back and forth between its current position and targeted position." />
	<instance name="command_tooltip" slot="6" header="Extra" description="description here" />

	<instance name="ability_tooltip" id="ability_tooltip0" slot="0" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip1" slot="1" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip2" slot="2" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip3" slot="3" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip4" slot="4" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip5" slot="5" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip6" slot="6" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip7" slot="7" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip8" slot="8" help="true" />

	<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip0" slot="0" help="true" />
	<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip1" slot="1" help="true" />
	<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip2" slot="2" help="true" />
	<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip3" slot="3" help="true" />
	<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip4" slot="4" help="true" />

	<instance name="ability_tooltip" id="ability_tooltip25" slot="25" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip26" slot="26" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip27" slot="27" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip28" slot="28" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip29" slot="29" help="true" />
	<instance name="ability_tooltip" id="ability_tooltip30" slot="30" help="true" />

	<instance name="ability_tooltip" id="stash_tooltip0" slot="32" help="false" />
	<instance name="ability_tooltip" id="stash_tooltip1" slot="33" help="false" />
	<instance name="ability_tooltip" id="stash_tooltip2" slot="34" help="false" />
	<instance name="ability_tooltip" id="stash_tooltip3" slot="35" help="false" />

	<instance name="ability_tooltip" id="state_tooltip9" slot="9" help="false" />
	<instance name="ability_tooltip" id="state_tooltip10" slot="10" help="false" />
	<instance name="ability_tooltip" id="state_tooltip11" slot="11" help="false" />
	<instance name="ability_tooltip" id="state_tooltip12" slot="12" help="false" />
	<instance name="ability_tooltip" id="state_tooltip13" slot="13" help="false" />
	<instance name="ability_tooltip" id="state_tooltip14" slot="14" help="false" />
	<instance name="ability_tooltip" id="state_tooltip15" slot="15" help="false" />
	<instance name="ability_tooltip" id="state_tooltip16" slot="16" help="false" />
	<instance name="ability_tooltip" id="state_tooltip17" slot="17" help="false" />
	<instance name="ability_tooltip" id="state_tooltip18" slot="18" help="false" />
	<instance name="ability_tooltip" id="state_tooltip19" slot="19" help="false" />

	<instance name="attack_tooltip" />
	<instance name="defense_tooltip" />
	<instance name="attribute_tooltip" />
	<instance name="attribute2_tooltip" />
	<instance name="health_tooltip" />
	<instance name="mana_tooltip" />
	<instance name="experience_tooltip" />
	<instance name="movement_tooltip" />
	<instance name="unit_tooltip" />

	<instance name="attack_tooltip_info" />
	<instance name="defense_tooltip_info" />
	<instance name="attribute_tooltip_info" />
	<instance name="health_tooltip_info" />
	<instance name="mana_tooltip_info" />
	<instance name="experience_tooltip_info" />
	<instance name="movement_tooltip_info" />

	<instance name="unit_tooltip_info" slot="0" />
	<instance name="unit_tooltip_info" slot="1" />
	<instance name="unit_tooltip_info" slot="2" />
	<instance name="unit_tooltip_info" slot="3" />
	<instance name="unit_tooltip_info" slot="4" />
	<instance name="unit_tooltip_info" slot="5" />
	<instance name="unit_tooltip_info" slot="6" />
	<instance name="unit_tooltip_info" slot="7" />
	<instance name="unit_tooltip_info" slot="8" />
	<instance name="unit_tooltip_info" slot="9" />
	<instance name="unit_tooltip_info" slot="10" />
	<instance name="unit_tooltip_info" slot="11" />
	<instance name="unit_tooltip_info" slot="12" />
	<instance name="unit_tooltip_info" slot="13" />
	<instance name="unit_tooltip_info" slot="14" />

	<instance name="unit_tooltip_hero" />
	<instance name="health_tooltip_hero" />
	<instance name="mana_tooltip_hero" />
	<instance name="experience_tooltip_hero" />

	<instance name="item_tooltip" id="shop_item_tooltip0" watch="ShopItemTooltip0" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip1" watch="ShopItemTooltip1" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip2" watch="ShopItemTooltip2" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip3" watch="ShopItemTooltip3" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip4" watch="ShopItemTooltip4" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip5" watch="ShopItemTooltip5" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip6" watch="ShopItemTooltip6" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip7" watch="ShopItemTooltip7" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip8" watch="ShopItemTooltip8" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip9" watch="ShopItemTooltip9" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip10" watch="ShopItemTooltip10" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip11" watch="ShopItemTooltip11" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip12" watch="ShopItemTooltip12" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip13" watch="ShopItemTooltip13" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip14" watch="ShopItemTooltip14" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip15" watch="ShopItemTooltip15" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip16" watch="ShopItemTooltip16" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip17" watch="ShopItemTooltip17" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip18" watch="ShopItemTooltip18" help="true" />
	<instance name="item_tooltip" id="shop_item_tooltip19" watch="ShopItemTooltip19" help="true" />

	<instance name="item_tooltip" id="recipe_item_tooltip" watch="RecipeItemTooltip" help="true" />

	<instance name="item_tooltip" id="recipe_component_tooltip0" watch="RecipeComponentTooltip0" help="true" />
	<instance name="item_tooltip" id="recipe_component_tooltip1" watch="RecipeComponentTooltip1" help="true" />
	<instance name="item_tooltip" id="recipe_component_tooltip2" watch="RecipeComponentTooltip2" help="true" />
	<instance name="item_tooltip" id="recipe_component_tooltip3" watch="RecipeComponentTooltip3" help="true" />

	<instance name="item_tooltip" id="recipe_usedin_tooltip0" watch="RecipeUsedInTooltip0" help="true" />
	<instance name="item_tooltip" id="recipe_usedin_tooltip1" watch="RecipeUsedInTooltip1" help="true" />
	<instance name="item_tooltip" id="recipe_usedin_tooltip2" watch="RecipeUsedInTooltip2" help="true" />
	<instance name="item_tooltip" id="recipe_usedin_tooltip3" watch="RecipeUsedInTooltip3" help="true" />

	<instance name="ability_info_tooltip" id="inventory_info_tooltip25" slot="25" help="false" />
	<instance name="ability_info_tooltip" id="inventory_info_tooltip26" slot="26" help="false" />
	<instance name="ability_info_tooltip" id="inventory_info_tooltip27" slot="27" help="false" />
	<instance name="ability_info_tooltip" id="inventory_info_tooltip28" slot="28" help="false" />
	<instance name="ability_info_tooltip" id="inventory_info_tooltip29" slot="29" help="false" />
	<instance name="ability_info_tooltip" id="inventory_info_tooltip30" slot="30" help="false" />

	<instance name="ability_info_tooltip" id="state_info_tooltip9" slot="9" help="false" />
	<instance name="ability_info_tooltip" id="state_info_tooltip10" slot="10" help="false" />
	<instance name="ability_info_tooltip" id="state_info_tooltip11" slot="11" help="false" />
	<instance name="ability_info_tooltip" id="state_info_tooltip12" slot="12" help="false" />
	<instance name="ability_info_tooltip" id="state_info_tooltip13" slot="13" help="false" />
	<instance name="ability_info_tooltip" id="state_info_tooltip14" slot="14" help="false" />

	<instance name="ability_hero_tooltip" id="hero_state_tooltip9" slot="9" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip10" slot="10" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip11" slot="11" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip12" slot="12" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip13" slot="13" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip14" slot="14" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip15" slot="15" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip16" slot="16" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip17" slot="17" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip18" slot="18" help="false" />
	<instance name="ability_hero_tooltip" id="hero_state_tooltip19" slot="19" help="false" />

	<instance name="ally_tooltip" id="ally_tooltip0" slot="0" help="false" />
	<instance name="ally_tooltip" id="ally_tooltip1" slot="1" help="false" />
	<instance name="ally_tooltip" id="ally_tooltip2" slot="2" help="false" />
	<instance name="ally_tooltip" id="ally_tooltip3" slot="3" help="false" />
	
	<!-- Stash Tooltips -->
	<panel name="stash_tooltip" x="-0.5h" y="-18.0h" width="27.0h" height="11.6h" align="right" valign="bottom" visible="0" noclick="1" color="invisible">
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .9" borderthickness=".5h" align="left" valign="top">
			<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".5h"/>
			<label height="95%" width="-6%" align="center" valign="center" textalign="left" textvalign="top" font="dyn_9" color="white" shadow="1" wrap="1" noclick="1">game_label_stash_tool_tip</label>
		</frame>
	</panel>
	<panel name="stash_deconstruct_tooltip" x="-0.5h" y="-18.0h" width="27.0h" height="11.6h" align="right" valign="bottom" visible="0" noclick="1" color="invisible">
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .9" borderthickness=".5h" align="left" valign="top">
			<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".5h"/>
			<label height="95%" width="-6%" align="center" valign="center" textalign="left" textvalign="top" font="dyn_9" color="white" shadow="1" wrap="1" noclick="1">game_label_stash_deconstruct_tool_tip</label>
		</frame>
	</panel>

	<!--- Chat -->
	<panel noclick="true" passivechildren="true">
		<instance name="game_chat_window" interface="game" xoffset="5h" yoffset="-36.5h"/>
	</panel>

	<!-- Item cursor -->
	<panel
		name="item_cursor"
		width="4.0h"
		height="4.0h"
		watch0="ItemCursorVisible"
		ontrigger0="SetVisible(param);"
		watch2="ItemCursorPosition"
		ontrigger2="SetX(param0 - 20); SetY(param1 - 20);"
		noclick="true"
		passivechildren="true"
		visible="false"
	>
		<frame texture="/ui/frames/rounded_bg_white.tga" color="black" borderthickness="6"/>
		<image
			x="2" y="2" width="-4" height="-4"
			watch1="ItemCursorIcon"
			ontrigger1="SetTexture(param);"
		/>
		<frame texture="/ui/frames/roundframe.tga" color="white" borderthickness="6"/>
	</panel>

	<effectpanel
		name="effect_panel"
		camerawidth="100a"
		cameraheight="100"
		watch0="MapEffect"
		ontrigger0="StartEffect(param0, GetMinimapDrawX('minimap', param1) / GetScreenWidth(), GetMinimapDrawY('minimap', 1.0 - param2) / GetScreenHeight(), param3);"
		noclick="true"
	/>

	<include file="fastshare.package"/>	
	
	<!-- Dev Stuff -->
	<!-- Dev menu button  -->
	<instance name="button_game" x="28.0h"  height="2.0h" width="8.0h" label="Dev" id="ShowDevMenu"  borderthickness="8" font="dyn_9" onclick="showwidget('dev_menu');" watch="Dev" ontrigger="SetVisible(param);" />

	<!-- Dev menu -->
	<panel name="dev_menu" width="19@" height="28h" cangrab="true" visible="false">
		<frame color="black" bordercolor="white" noclick="true" borderthickness="2">
			<panel width="85%" height="90%" align="center" valign="center" noclick="true" float="bottom" padding="0.5h">
				<panel height="2.1h" noclick="true">
					<instance width="47%" align="left" name="button_game" label="Refresh!" font="dyn_10"  onclick="Cmd('Refresh ' # GetSelectedEntity());"/>
					<instance width="47%" align="right" name="button_game" label="Kill!" font="dyn_10" onclick="Cmd('Kill ' # GetSelectedEntity());" />
				</panel>
				<panel height="1" color="white"/>
				<panel height="2.1h" float="right" padding="0.2h" noclick="true">
					<label width="4.1h" font="dyn_10" color="white" shadow="true">Exp</label>
					<instance width="5h" name="button_game" label="+150" onclick="Cmd('GiveExp ' # GetSelectedEntity() # ' 150');"  font="dyn_10" />
					<instance width="5.2h" name="button_game" label="+1500" onclick="Cmd('GiveExp ' # GetSelectedEntity() # ' 1500');"  font="dyn_10" />
				</panel>
				<panel height="2.1h" float="right" padding="0.2h" noclick="true">
					<label width="4.1h" font="dyn_10" color="white" shadow="true">Level</label>
					<instance width="2.2h" name="button_game" label="+" id="dev_levelup" onclick="Cmd('LevelUp ' # GetSelectedEntity());"  font="dyn_10" />
					<instance width="5h" name="button_game" label="Reset" id="dev_reset" onclick="Cmd('ResetExp ' # GetSelectedEntity());"  font="dyn_10" />
					<instance width="4h" name="button_game" label="Max" id="dev_reset" onclick="Cmd('LevelMax ' # GetSelectedEntity());"  font="dyn_10" />
				</panel>
				<instance height="2.1h" name="button_game" label="Give Gold 15000" onclick="Cmd('GiveGold ' # GetLocalClientNumber() # ' 15000');"  font="dyn_10" />
				<instance height="2.1h" name="button_game" label="Remove Hero" font="dyn_10" onclick="Cmd('RemoveHero ' # GetLocalClientNumber());" />
				<panel height="1" color="white"/>
				<panel height="2.1h" float="right" padding="0.2h" noclick="true">
					<label font="dyn_10" width="5h" color="white" shadow="true">Creeps</label>
					<instance name="Noptions_checkbox" width="2.1h" height="2.1h" align="" cvar="sv_spawncreeps"/>
					<instance name="button_game" width="4.8h" label="Spawn" font="dyn_10" onclick="Cmd('SpawnCreeps');" />
					<instance name="button_game" width="4h" label="Kill" font="dyn_10" onclick="Cmd('KillCreeps');" />
				</panel>
				<panel height="1" color="white"/>
				<panel height="2.1h" float="right" padding="0.2h" noclick="true">
					<label font="dyn_10" width="7h" color="white" shadow="true">Powerups</label>
					<instance name="Noptions_checkbox" width="2.1h" height="2.1h" align="" cvar="sv_spawnPowerups"/>
					<instance name="button_game" width="4.8h" label="Spawn" font="dyn_10" onclick="Cmd('SpawnPowerup');" />
				</panel>
				<panel height="1" color="white"/>
				<instance height="2.1h" name="button_game" label="Spawner" font="dyn_10" onclick="ShowWidget('dev_spawner');" />
				<instance height="2.1h" name="button_game" label="Close" font="dyn_10" onclick="HideWidget('dev_menu');" />
			</panel>
		</frame>
	</panel>

	<!-- Dev spawner -->
	<template name="dev_spawner">
		<panel color="0 0 0 0" noclick="1" float="bottom" padding="0.5h" align="center" width="-3h" reverse="true" >
			<anchor y="5%" />
			<instance name="Noptions_combobox" width="100%" valign="top" itemwidth="100%" maxlistheight="10" cvar="dev_spawnerType" onshow="CreateString('dev_spawnerType', 'Creep_LegionMelee'); ComboBoxCmd('clear'); AddUnitTypes('Ncombobox_item'); SetSelectedItemByValue('Creep_LegionMelee');" />
			<instance name="Noptions_combobox" width="100%" valign="top" itemwidth="100%" maxlistheight="10" cvar="dev_spawnerTeam" onshow="CreateInt('dev_spawnerTeam', -2);" data=""
				populate="
					AddTemplateListItem('Ncombobox_item', '-2', 'label', 'Neutral');
					AddTemplateListItem('Ncombobox_item', '-1', 'label', 'Passive');
					AddTemplateListItem('Ncombobox_item', '1', 'label', 'Legion');
					AddTemplateListItem('Ncombobox_item', '2', 'label', 'Hellbourne');"
			/>
			<instance name="Noptions_combobox" width="100%" valign="top" itemwidth="100%" maxlistheight="10" cvar="dev_spawnerOwner" onshow="CreateBool('dev_spawnerOwner', true);" data=""
				populate="
					AddTemplateListItem('Ncombobox_item', 'false', 'label', 'None');
					AddTemplateListItem('Ncombobox_item', 'true', 'label', 'Local Client');"
			/>
			<instance height="2h" name="button_game" label="Spawn" id="dev_spawn" font="dyn_10" onclick="Cmd('StartCmdClickPos SpawnUnit2 ' # dev_spawnerType # ' ' # If(dev_spawnerOwner, GetLocalClientNumber(), '-1')  # ' ' # dev_spawnerTeam);" />
			<instance height="2h" name="button_game" label="Close" id="dev_close" font="dyn_10" onclick="HideWidget('dev_spawner');" />
		</panel>
	</template>

	<panel name="dev_spawner" width="30@" height="30%" cangrab="true" visible="false">
		<instance name="frame_ornate_32" nebula="1" body="dev_spawner" noclick="1" cangrab="0"/>
	</panel>
</interface>
